FRA_phalanstere_opinion = {
	add_opinion_modifier = {
		target = FRA
		modifier = FRA_aided_phalanstere
	}
	if = {
		limit = {
			has_global_flag = PHALANSTERE_ENG
			NOT = { tag = ENG }
		}
		add_opinion_modifier = {
			target = ENG
			modifier = FRA_aided_phalanstere
		}
	}
	if = {
		limit = {
			has_global_flag = PHALANSTERE_CSA
			NOT = { tag = CSA }
		}
		add_opinion_modifier = {
			target = CSA
			modifier = FRA_aided_phalanstere
		}
	}
}

FRA_phalanstere_tech_sharing = {
	if = {
		limit = {
			has_global_flag = scientific_phalanstere
		}
		add_to_tech_sharing_group = phalanstere_research
	}
	else = {
		set_country_flag = phalanstere_internationale_member
	}
	country_event = comfrance.129
}

FRA_phalanstere_development_in_random_state = {
	random_owned_state = {
		limit = {
			is_in_home_area = yes
			free_building_slots = {
				building = industrial_complex
				size > 0
				include_locked = yes
			}
			NOT = {
				has_state_category = zero
				has_state_category = wasteland
				has_state_category = zero_island
			}
		}
		add_extra_state_shared_building_slots = 1
		add_building_construction = {
			type = industrial_complex
			level = 1
			instant_build = yes
		}
	}
}

FRA_phalanstere_development_in_capital = {
	if = {
		limit = {
			capital_scope = {
				free_building_slots = {
					building = industrial_complex
					size > 0
					include_locked = yes
				}
			}
		}
		capital_scope = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
	else = {
		FRA_phalanstere_development_in_random_state = yes
	}
}

FRA_phalanstere_development_in_targeted_state = {
	if = {
		limit = {
			free_building_slots = {
				building = industrial_complex
				size > 0
				include_locked = yes
			}
		}
		add_extra_state_shared_building_slots = 1
		add_building_construction = {
			type = industrial_complex
			level = 1
			instant_build = yes
		}
	}
	else = {
		FRA_phalanstere_development_in_random_state = yes
	}
}

FRA_phalanstere_resources_central_america = {
	if = {
		limit = {
			OR = {
				tag = GUA
				tag = ELS
				tag = HON
				tag = NIC
				tag = COS
			}
			capital_scope = {
				NOT = {
					has_state_flag = FRA_phalanstere_developed
				}
			}
		}
		capital_scope = {
			add_resource = {
				type = chromium
				amount = 3
			}
			set_state_flag = FRA_phalanstere_developed
		}
	}
	else_if = {
		limit = {
			tag = PAN
			capital_scope = {
				NOT = {
					has_state_flag = FRA_phalanstere_developed
				}
			}
		}
		capital_scope = {
			add_resource = {
				type = oil
				amount = 4
			}
			set_state_flag = FRA_phalanstere_developed
		}
	}
	else_if = {
		limit = {
			tag = CEN
			any_owned_state = {
				OR = {
					state = 313 #Guatemala
					state = 314 #El Salvador
					state = 842 #Tegucigalpa
					state = 317 #Nicaragua
					state = 316 #Costa Rica
					state = 304 #Panama
				}
				NOT = {
					has_state_flag = FRA_phalanstere_developed
				}
			}
		}
		every_owned_state = {
			limit = {
				OR = {
					state = 313
					state = 314
					state = 842
					state = 317
					state = 316
				}
				NOT = {
					has_state_flag = FRA_phalanstere_developed
				}
			}
			add_resource = {
				type = chromium
				amount = 3
			}
			set_state_flag = FRA_phalanstere_developed
		}
		if = {
			limit = {
				owns_state = 304
				304 = {
					NOT = {
						has_state_flag = FRA_phalanstere_developed
					}
				}
			}
			add_resource = {
				type = oil
				amount = 4
				state = 304
			}
			304 = {
				set_state_flag = FRA_phalanstere_developed
			}
		}
	}
}

FRA_phalanstere_resources_south_america = {
	if = {
		limit = {
			tag = BRA
		}
		add_resource = {
			type = steel
			amount = 13
			state = 496
		}
		add_resource = {
			type = rubber
			amount = 19
			state = 495
		}
	}
	else_if = {
		limit = {
			tag = FOP
		}
		add_resource = {
			type = oil
			amount = 14
			state = 512
		}
		add_resource = {
			type = steel
			amount = 6
			state = 902
		}
	}
	else_if = {
		limit = {
			tag = BOL
		}
		add_resource = {
			type = steel
			amount = 6
			state = 302
		}
	}
}
