###########################
# Serbia Focus Tree
# By Wyandotte
###########################

focus_tree = {
	id = serbia_focus

	country = {
		factor = 0
		modifier = {
			add = 10
			tag = SER
		}
	}

	default = no
	continuous_focus_position = { x = 250 y = 800 }

	#######################
	### Government form ###
	#######################

	focus = {
		id = SER_crown_the_king
		icon = GFX_goal_SER_king
		x = 4
		y = 0

		cost = 1

		mutually_exclusive = {
			focus = SER_keep_regent
			focus = SER_declare_republic
		}

		ai_will_do = {
			factor = 500
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = SER_government_path
						option = SER_GOVERNMENT_PATH_REGENT_GREATER_SERBIA
					}
					has_game_rule = {
						rule = SER_government_path
						option = SER_GOVERNMENT_PATH_REGENT_SLAVIC_FEDERATION
					}
					has_game_rule = {
						rule = SER_government_path
						option = SER_GOVERNMENT_PATH_REPUBLIC_GREATER_SERBIA
					}
					has_game_rule = {
						rule = SER_government_path
						option = SER_GOVERNMENT_PATH_REPUBLIC_SLAVIC_FEDERATION
					}
				}
			}
		}

		available = {
			is_subject = no
			date > 1937.2.1
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_crown_the_king"
			country_event = serbia.5	# Form of the monarchy

			if = {
				limit = {
					NOT = { has_completed_focus = SER_form_yugoslavia }
				}
				set_cosmetic_tag = SER_kingdom
			}

			retire_country_leader = yes

			create_country_leader = {
				name = "Alexander II"
				desc = "POLITICS_ALEXANDER_II_DESC"
				picture = "Alexander_II.tga"
				expire = "1965.1.1"
				ideology = authoritarian_democrat_subtype
			}

			hidden_effect = {
				### Set all other democratic party leaders to Alexander II
				create_country_leader = {
					name = "Alexander II"
					desc = "POLITICS_ALEXANDER_II_DESC"
					picture = "Alexander_II.tga"
					expire = "1965.1.1"
					ideology = social_conservative_subtype
				}
				create_country_leader = {
					name = "Alexander II"
					desc = "POLITICS_ALEXANDER_II_DESC"
					picture = "Alexander_II.tga"
					expire = "1965.1.1"
					ideology = market_liberal_subtype
				}
				create_country_leader = {
					name = "Alexander II"
					desc = "POLITICS_ALEXANDER_II_DESC"
					picture = "Alexander_II.tga"
					expire = "1965.1.1"
					ideology = social_liberal_subtype
				}
				create_country_leader = {
					name = "Alexander II"
					desc = "POLITICS_ALEXANDER_II_DESC"
					picture = "Alexander_II.tga"
					expire = "1965.1.1"
					ideology = social_democrat_subtype
				}
			}

			hidden_effect = { news_event = { id = worldnews.117 } }
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	### Regent ###
	focus = {
		id = SER_keep_regent
		icon = GFX_focus_generic_home_defense
		x = -3
		y = 0
		relative_position_id = SER_crown_the_king

		cost = 1

		mutually_exclusive = {
			focus = SER_crown_the_king
			focus = SER_declare_republic
		}

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = SER_government_path
						option = SER_GOVERNMENT_PATH_KING_GREATER_SERBIA
					}
					has_game_rule = {
						rule = SER_government_path
						option = SER_GOVERNMENT_PATH_KING_SLAVIC_FEDERATION
					}
					has_game_rule = {
						rule = SER_government_path
						option = SER_GOVERNMENT_PATH_REPUBLIC_GREATER_SERBIA
					}
					has_game_rule = {
						rule = SER_government_path
						option = SER_GOVERNMENT_PATH_REPUBLIC_SLAVIC_FEDERATION
					}
				}
			}
		}

		available = {
			is_subject = no
			date > 1937.2.1
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_keep_regent"
			add_popularity = { ideology = authoritarian_democrat popularity = 0.1 }
		}
	}

	focus = {
		id = SER_strengthen_regent_rule
		icon = GFX_goal_generic_tackle_corruption
		x = -3
		y = 2
		relative_position_id = SER_crown_the_king

		cost = 10

		prerequisite = { focus = SER_keep_regent }

		ai_will_do = { factor = 20 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_strengthen_regent_rule"
			add_popularity = { ideology = authoritarian_democrat popularity = 0.2 }
			add_political_power = 50
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = SER_larger_army_role
		icon = GFX_goal_enlist_the_police
		x = -3
		y = 3
		relative_position_id = SER_crown_the_king

		cost = 10

		prerequisite = { focus = SER_strengthen_regent_rule }

		ai_will_do = {
			factor = 15

			modifier = {
				factor = 2
				has_war = yes
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_larger_army_role"
			add_ideas = SER_army_command
		}
		search_filters = { FOCUS_FILTER_ARMY_BONUS }
	}

	### King ###
	focus = {
		id = SER_absolutism
		icon = GFX_goal_authoritarian
		x = -1
		y = 1
		relative_position_id = SER_crown_the_king

		cost = 1

		prerequisite = { focus = SER_crown_the_king }

		mutually_exclusive = { focus = SER_constitutionalism }

		available = { has_country_flag = absolute_monarchy }

		bypass = { has_country_flag = absolute_monarchy }

		ai_will_do = { factor = 0 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_absolutism"
			effect_tooltip = {
				add_political_power = -40
				set_politics = { ruling_party = paternal_autocrat elections_allowed = no }
				add_ideas = SER_Petar_Zivkovic_hog_pau
				add_ideas = SER_Bogoljub_Jevtic_for_ade
				add_ideas = SER_Svetislav_Milosavljevic_eco_ade
				add_ideas = SER_Milan_Srskic_sec_ade
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = SER_monument_to_the_unknown_hero
		icon = GFX_goal_generic_officer
		x = -1
		y = 2
		relative_position_id = SER_crown_the_king

		cost = 10

		prerequisite = { focus = SER_absolutism	}

		ai_will_do = { factor = 20 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_monument_to_the_unknown_hero"
			add_ideas = SER_heroic_spirit
		}
		search_filters = { FOCUS_FILTER_ARMY_BONUS }
	}

	focus = {
		id = SER_glory_to_the_king
		icon = GFX_goal_generic_propaganda
		x = -1
		y = 3
		relative_position_id = SER_crown_the_king

		cost = 10

		prerequisite = { focus = SER_monument_to_the_unknown_hero }

		ai_will_do = { factor = 15 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_glory_to_the_king"
			add_stability = 0.10
			add_political_power = 150
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY }
	}

	focus = {
		id = SER_a_strong_state
		icon = GFX_goal_ideology_paternal_autocrat
		x = -2
		y = 4
		relative_position_id = SER_crown_the_king

		cost = 10

		prerequisite = {
			focus = SER_glory_to_the_king
			focus = SER_larger_army_role
		}

		ai_will_do = { factor = 10 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_a_strong_state"
			add_ideas = SER_strong_state_idea
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY }
	}

	focus = {
		id = SER_constitutionalism
		icon = GFX_goal_POR_royal_edicts
		x = 1
		y = 1
		relative_position_id = SER_crown_the_king

		cost = 1

		prerequisite = { focus = SER_crown_the_king }
		mutually_exclusive = { focus = SER_absolutism }

		available = { has_country_flag = constitutional_monarchy }

		bypass = { has_country_flag = constitutional_monarchy }

		ai_will_do = { factor = 0 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_constitutionalism"
			effect_tooltip = {
				add_political_power = -40
				set_politics = { ruling_party = social_conservative election_frequency = 48 elections_allowed = yes }
				add_ideas = SER_Nikola_Uzunovic_hog_sco
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = SER_free_society
		icon = GFX_focus_generic_the_giant_wakes
		x = 1
		y = 2
		relative_position_id = SER_crown_the_king

		cost = 10

		prerequisite = { focus = SER_constitutionalism }

		ai_will_do = { factor = 20 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_free_society"
			add_ideas = SER_free_society_idea
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = SER_private_companies
		icon = GFX_goal_generic_intelligence_exchange
		x = 1
		y = 3
		relative_position_id = SER_crown_the_king

		cost = 10

		prerequisite = { focus = SER_free_society }

		ai_will_do = { factor = 15 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_private_companies"
			add_political_power = 50

			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }
	}

	### Republic ###
	focus = {
		id = SER_declare_republic
		icon = GFX_goal_tfv_sever_ties_with_uk
		x = 3
		y = 0
		relative_position_id = SER_crown_the_king

		cost = 1

		mutually_exclusive = {
			focus = SER_crown_the_king
			focus = SER_keep_regent
		}

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = SER_government_path
						option = SER_GOVERNMENT_PATH_KING_GREATER_SERBIA
					}
					has_game_rule = {
						rule = SER_government_path
						option = SER_GOVERNMENT_PATH_KING_SLAVIC_FEDERATION
					}
					has_game_rule = {
						rule = SER_government_path
						option = SER_GOVERNMENT_PATH_REGENT_GREATER_SERBIA
					}
					has_game_rule = {
						rule = SER_government_path
						option = SER_GOVERNMENT_PATH_REGENT_SLAVIC_FEDERATION
					}
				}
			}
		}

		available = {
			is_subject = no
			date > 1937.2.1
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_declare_republic"
			if = {
				limit = {
					NOT = { has_completed_focus = SER_form_yugoslavia }
				}
				set_cosmetic_tag = SER_republic
			}

			hidden_effect = { add_popularity = { ideology = market_liberal popularity = 0.4 } }
			set_politics = { ruling_party = market_liberal election_frequency = 48 elections_allowed = yes }

			hidden_effect = {	remove_ideas_with_trait = head_of_government }
			add_ideas = SER_Ljubomir_Davidovic_hog_sli

			hidden_effect = { news_event = { id = worldnews.118 } }
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = SER_freedom
		icon = GFX_goal_liberty
		x = 3
		y = 2
		relative_position_id = SER_crown_the_king

		cost = 10

		prerequisite = { focus = SER_declare_republic }

		ai_will_do = { factor = 20 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_freedom"
			add_stability = 0.10
			add_war_support = 0.05
			add_political_power = 100
		}
		search_filters = { FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY }
	}

	focus = {
		id = SER_scientific_effort
		icon = GFX_goal_generic_scientific_exchange
		x = 3
		y = 3
		relative_position_id = SER_crown_the_king

		cost = 10

		prerequisite = { focus = SER_freedom }

		ai_will_do = { factor = 15 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_scientific_effort"
			add_ideas = SER_science_idea
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SER_democracy_on_balkans
		icon = GFX_goal_ideology_social_liberal
		x = 2
		y = 4
		relative_position_id = SER_crown_the_king

		cost = 10

		prerequisite = {
			focus = SER_private_companies
			focus = SER_scientific_effort
		}

		ai_will_do = { factor = 10 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_democracy_on_balkans"
			add_ideas = SER_beacon_of_liberty
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	######################
	### Foreign Policy ###
	######################

	### Belgrade Pact
	focus = {
		id = SER_congress_of_belgrade
		icon = GFX_focus_generic_diplomatic_treaty
		x = 15
		y = 0

		cost = 2

		available = {
			is_subject = no
			is_in_faction = no
			has_war = no
			date > 1937.5.1
		}

		ai_will_do = {
			factor = 15

			# Much more likely to create the Pact if Romania is not in a civil war
			modifier = {
				factor = 100

				OR = {
					AND = {
						country_exists = RRM
						NOT = { country_exists = ROM }
					}
					AND = {
						country_exists = ROM
						NOT = { country_exists = RRM }
					}
					NOT = {
						country_exists = ROM
						country_exists = RRM
					}
				}
			}

			modifier = {
				factor = 10

				BUL = { has_war = yes }
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_congress_of_belgrade"
			add_political_power = 50

			country_event = pact.1
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = SER_ultimatum_to_bulgaria
		icon = GFX_BUL_broken_crown
		x = -5
		y = 1
		relative_position_id = SER_congress_of_belgrade

		cost = 4

		prerequisite = { focus = SER_congress_of_belgrade }

		available = {
			has_country_flag = SER_founded_belgradepact
			is_faction_leader = yes
			is_subject = no
			NOT = { has_global_flag = balkan_war_started }
			can_declare_war_on = BUL
		}

		bypass = {
			OR = {
				BUL = { is_subject_of = ROOT }
				has_global_flag = balkan_war_started
				owns_state = 48
			}
		}

		will_lead_to_war_with = BUL

		ai_will_do = {
			factor = 1000
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				ROM = { has_war_with = RRM }
			}
			modifier = {
				factor = 0
				NOT = {
					is_in_faction_with = GRE
					is_in_faction_with = ROM
					is_in_faction_with = RRM
					strength_ratio = { tag = BUL ratio > 1.0 }
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_ultimatum_to_bulgaria"
			BUL = {
				country_event = { id = pact.17 hours = 4 }
			}
		}
	}

	focus = {
		id = SER_occupation_of_bulgaria
		icon = GFX_goal_generic_position_armies
		x = -6
		y = 2
		relative_position_id = SER_congress_of_belgrade

		cost = 10

		prerequisite = { focus = SER_ultimatum_to_bulgaria }

		available = {
			NOT = { country_exists = BUL }
			owns_state = 48
		}

		ai_will_do = { factor = 25 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_occupation_of_bulgaria"
			country_event = pact.67

			if = {
				limit = { has_idea = SER_occupation_of_bulgaria_idea }
				remove_ideas = SER_occupation_of_bulgaria_idea
			}
		}
	}

	focus = {
		id = SER_develop_bulgaria
		icon = GFX_goal_generic_construct_infrastructure
		x = -6
		y = 3
		relative_position_id = SER_congress_of_belgrade

		cost = 10

		prerequisite = { focus = SER_occupation_of_bulgaria }

		available = {
			BUL = { is_subject_of = ROOT }
		}

		ai_will_do = { factor = 7 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_develop_bulgaria"
			# 1x civ factory, 2x 1 infrastructure
			BUL = {
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}

				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = infrastructure
							size > 0
						}
					}

					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}

				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = infrastructure
							size > 0
						}
					}

					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = SER_democratic_bulgaria
		icon = GFX_goal_generic_national_unity
		x = -6
		y = 4
		relative_position_id = SER_congress_of_belgrade

		cost = 10

		prerequisite = { focus = SER_develop_bulgaria }
		prerequisite = {
			focus = SER_scientific_effort
			focus = SER_private_companies
		}

		available = {
			BUL = { is_subject_of = ROOT }
		}

		ai_will_do = { factor = 15 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_democratic_bulgaria"
			add_political_power = 50

			BUL = {
				if = {
					limit = { has_government = social_conservative }
					add_popularity = { ideology = social_conservative popularity = 0.2 }
				}
				if = {
					limit = { has_government = market_liberal }
					add_popularity = { ideology = market_liberal popularity = 0.2 }
				}
				if = {
					limit = { has_government = social_liberal }
					add_popularity = { ideology = social_liberal popularity = 0.2 }
				}
				if = {
					limit = { has_government = social_democrat }
					add_popularity = { ideology = social_democrat popularity = 0.2 }
				}
				if = {
					limit = {
						NOT = {
							has_government = social_conservative
							has_government = market_liberal
							has_government = social_liberal
							has_government = social_democrat
						}
					}
					add_political_power = 100
				}
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = SER_integrate_macedonia
		icon = GFX_goal_generic_major_alliance
		x = -4
		y = 2
		relative_position_id = SER_congress_of_belgrade

		cost = 10

		prerequisite = { focus = SER_ultimatum_to_bulgaria }

		available = {
			owns_state = 106
		}

		bypass = {
			106 = { is_core_of = ROOT }
			841 = { is_core_of = ROOT }
		}

		ai_will_do = { factor = 40 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_integrate_macedonia"
			hidden_effect = {
				remove_state_claim = 106
				remove_state_claim = 841
			}
			add_state_core = 106
			add_state_core = 841
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	focus = {
		id = SER_develop_macedonia
		icon = GFX_goal_generic_construct_public_housing
		x = -4
		y = 3
		relative_position_id = SER_congress_of_belgrade

		cost = 10

		prerequisite = { focus = SER_integrate_macedonia }

		available = {
			owns_state = 106
		}

		ai_will_do = { factor = 20 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_develop_macedonia"
			106 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	### Expansion
	focus = {
		id = SER_greater_serbia
		icon = GFX_focus_generic_support_the_left_right
		x = -2
		y = 1
		relative_position_id = SER_congress_of_belgrade

		cost = 10

		prerequisite = { focus = SER_congress_of_belgrade }

		mutually_exclusive = { focus = SER_slavic_federation }

		ai_will_do = {
			factor = 300
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = SER_government_path
						option = SER_GOVERNMENT_PATH_KING_SLAVIC_FEDERATION
					}
					has_game_rule = {
						rule = SER_government_path
						option = SER_GOVERNMENT_PATH_REGENT_SLAVIC_FEDERATION
					}
					has_game_rule = {
						rule = SER_government_path
						option = SER_GOVERNMENT_PATH_REPUBLIC_SLAVIC_FEDERATION
					}
				}
			}
		}

		available = { is_subject = no }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_greater_serbia"
			custom_effect_tooltip = SER_greater_serbia_tooltip

			add_political_power = 100
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = SER_slavic_federation
		icon = GFX_goal_tripartite_pact
		x = 4
		y = 1
		relative_position_id = SER_congress_of_belgrade

		cost = 10

		prerequisite = { focus = SER_congress_of_belgrade }

		mutually_exclusive = { focus = SER_greater_serbia }

		available = { is_subject = no }

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = SER_government_path
						option = SER_GOVERNMENT_PATH_KING_GREATER_SERBIA
					}
					has_game_rule = {
						rule = SER_government_path
						option = SER_GOVERNMENT_PATH_REGENT_GREATER_SERBIA
					}
					has_game_rule = {
						rule = SER_government_path
						option = SER_GOVERNMENT_PATH_REPUBLIC_GREATER_SERBIA
					}
				}
			}
			modifier = {
				factor = 2
				NOT = { country_exists = CRO } # Yugoslavia will be the *real* Slavic federation
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_slavic_federation"
			custom_effect_tooltip = SER_slavic_federation_tooltip

			add_political_power = -100
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = SER_conquer_vojvodina
		icon = GFX_goal_generic_occupy_states_ongoing_war
		x = -1
		y = 2
		relative_position_id = SER_congress_of_belgrade

		cost = 10

		prerequisite = {
			focus = SER_greater_serbia
			focus = SER_slavic_federation
		}

		available = {
			is_subject = no
			can_declare_war_on = 45.owner
			OR = {
				is_faction_leader = yes
				is_in_faction = no
			}
			45 = {
				any_neighbor_state = { is_owned_by = ROOT }
			}
		}

		bypass = {
			45 = { is_owned_by_ROOT_or_subject = yes }
		}

		will_lead_to_war_with = HUN
		will_lead_to_war_with = AUS
		will_lead_to_war_with = CRO

		available_if_capitulated = yes
		cancel_if_invalid = yes
		continue_if_invalid = no

		ai_will_do = {
			factor = 30
			modifier = {
				factor = 5
				HUN = {
					has_war_with = AUS
					owns_state = 45
				}
			}
			modifier = {
				factor = 2
				OR = {
					ROM = { is_in_faction_with = ROOT }
					RRM = { is_in_faction_with = ROOT }
				}
			}
			modifier = {
				factor = 0
				has_war = yes
				NOT = { has_country_flag = waiting_to_attack_austria }
			}
			modifier = {
				factor = 0.1
				is_in_faction = no
			}
			# don't attack Austria unless it's vulnerable or other countries are waiting to help
			modifier = {
				factor = 0
				45 = { owned_by_austria_or_puppet = yes }
				AUS = {
					is_subject = no
					is_faction_leader = yes
					surrender_progress < 0.10
					NOT = {
						has_war_with = GER
						has_war_with = RUS
						has_war_with = HUN
						has_war_with = POL
						has_war_with = ITA
					}
				}
				NOT = {
					POL = { has_country_flag = waiting_to_attack_austria }
					ITA = { has_country_flag = waiting_to_attack_austria }
				}
			}
			modifier = {
				factor = 5
				45 = { owned_by_austria_or_puppet = yes }
				OR = {
					AUS = { has_war_with = HUN }
					POL = { has_country_flag = waiting_to_attack_austria }
					ITA = { has_country_flag = waiting_to_attack_austria }
				}
			}
			modifier = {
				factor = 10
				has_country_flag = waiting_to_attack_austria
			}
			# don't attack if it's owned by someone other than Austria, who is not a puppet/faction member and is stronger
			modifier = {
				factor = 0
				NOT = { owns_state = 45 }
				45 = {
					owned_by_austria_or_puppet = no
					owner = {
						NOT = { is_subject_of = AUS }
						NOT = { is_in_faction_with = AUS }
						surrender_progress < 0.10
						strength_ratio = { tag = SER ratio > 1.0 }
					}
				}
			}
			# don't attack if it's owned by someone other than Austria, who is a puppet of a stronger overlord
			modifier = {
				factor = 0
				NOT = { owns_state = 45 }
				45 = {
					owned_by_austria_or_puppet = no
					owner = {
						is_subject = yes
						overlord = {
							NOT = { tag = AUS }
							surrender_progress < 0.10
							strength_ratio = { tag = SER ratio > 1.0 }
						}
					}
				}
			}
			# don't attack if it's owned by someone other than Austria, who is in a faction with a stronger leader
			modifier = {
				factor = 0
				NOT = { owns_state = 45 }
				45 = {
					owned_by_austria_or_puppet = no
					owner = {
						is_in_faction = yes
						is_faction_leader = no
						any_allied_country = {
							NOT = { tag = AUS }
							is_faction_leader = yes
							surrender_progress < 0.10
							strength_ratio = { tag = ROM ratio > 1.0 }
						}
					}
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_conquer_vojvodina"
			add_state_claim = 45
			add_state_claim = 875

			random_country = {
				limit = { owns_state = 45 } # Vojvodina
				ROOT = {
					declare_war_on = {
						target = PREV
						type = take_state_focus
						generator = { 45 875 }
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	focus = {
		id = SER_albanian_question
		icon = GFX_goal_generic_forceful_treaty
		x = -2
		y = 3
		relative_position_id = SER_congress_of_belgrade

		cost = 10

		prerequisite = { focus = SER_greater_serbia }
		prerequisite = { focus = SER_conquer_vojvodina }

		available = {
			is_subject = no
			owns_state = 765 # Kosovo
		}

		ai_will_do = {
			factor = 15

			modifier = {
				factor = 0.5

				ALB = { is_subject = yes }
			}

			modifier = {
				factor = 0

				has_war = yes
			}
		}

		will_lead_to_war_with = ALB

		available_if_capitulated = yes
		cancel_if_invalid = yes
		continue_if_invalid = no

		bypass = {
			OR = {
				owns_state = 44 # Tirana
				ALB = { is_subject_of = ROOT }
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_albanian_question"
			if = {
				limit = { NOT = { owns_state = 44 } } # Failsafe for when the focus can be bypassed

				if = {
					limit = { country_exists = ALB }

					# Annex wargoal against Albania if it exists
					declare_war_on = {
						target = ALB
						type = annex_everything
					}

					# Otherwise, create a wargoal against the country that holds Tirana
					else = {
						random_country = {
							limit = { owns_state = 44 } # Tirana
							ROOT = {
								declare_war_on = {
									target = PREV
									type = take_state_focus
									generator = { 44 }
								}
							}
						}
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	focus = {
		id = SER_free_bosnia
		icon = GFX_goal_tfv_saf_anti_colonialist_crusade
		x = 1
		y = 2
		relative_position_id = SER_congress_of_belgrade

		cost = 10

		prerequisite = {
			focus = SER_slavic_federation
			focus = SER_greater_serbia
		}

		available = {
			is_subject = no
			can_declare_war_on = 104.owner
			OR = {
				is_faction_leader = yes
				is_in_faction = no
			}
			104 = {
				any_neighbor_state = { is_owned_by = ROOT }
			}
		}

		will_lead_to_war_with = CRO
		will_lead_to_war_with = BOS
		will_lead_to_war_with = AUS
		will_lead_to_war_with = HUN

		available_if_capitulated = yes
		cancel_if_invalid = yes
		continue_if_invalid = no

		bypass = {
			104 = { is_owned_by_ROOT_or_subject = yes }
		}

		ai_will_do = {
			factor = 20
			modifier = {
				factor = 2
				CRO = { has_war_with = AUS }
				CRO = { owns_state = 104 }
			}
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0.1
				is_in_faction = no
				NOT = { has_country_flag = waiting_to_attack_austria }
			}
			# don't attack Austria unless it's vulnerable or other countries are waiting to help
			modifier = {
				factor = 0
				104 = { owned_by_austria_or_puppet = yes }
				AUS = {
					is_subject = no
					is_faction_leader = yes
					surrender_progress < 0.10
					NOT = {
						has_war_with = GER
						has_war_with = RUS
						has_war_with = HUN
						has_war_with = POL
						has_war_with = ITA
					}
				}
				NOT = {
					POL = { has_country_flag = waiting_to_attack_austria }
					ITA = { has_country_flag = waiting_to_attack_austria }
				}
			}
			modifier = {
				factor = 5
				104 = { owned_by_austria_or_puppet = yes }
				OR = {
					AUS = { has_war_with = HUN }
					POL = { has_country_flag = waiting_to_attack_austria }
					ITA = { has_country_flag = waiting_to_attack_austria }
				}
			}
			modifier = {
				factor = 10
				has_country_flag = waiting_to_attack_austria
			}
			# don't attack if it's owned by someone other than Austria, who is not a puppet/faction member and is stronger
			modifier = {
				factor = 0
				NOT = { owns_state = 104 }
				104 = {
					owned_by_austria_or_puppet = no
					owner = {
						NOT = { is_subject_of = AUS }
						NOT = { is_in_faction_with = AUS }
						surrender_progress < 0.10
						strength_ratio = { tag = SER ratio > 1.0 }
					}
				}
			}
			# don't attack if it's owned by someone other than Austria, who is a puppet of a stronger overlord
			modifier = {
				factor = 0
				NOT = { owns_state = 104 }
				104 = {
					owned_by_austria_or_puppet = no
					owner = {
						is_subject = yes
						overlord = {
							NOT = { tag = AUS }
							surrender_progress < 0.10
							strength_ratio = { tag = SER ratio > 1.0 }
						}
					}
				}
			}
			# don't attack if it's owned by someone other than Austria, who is in a faction with a stronger leader
			modifier = {
				factor = 0
				NOT = { owns_state = 104 }
				104 = {
					owned_by_austria_or_puppet = no
					owner = {
						is_in_faction = yes
						is_faction_leader = no
						any_allied_country = {
							NOT = { tag = AUS }
							is_faction_leader = yes
							surrender_progress < 0.10
							strength_ratio = { tag = ROM ratio > 1.0 }
						}
					}
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_free_bosnia"
			add_state_claim = 104

			# Create a wargoal against the country that holds Bosnia
			random_country = {
				limit = { owns_state = 104 } # Bosnia
				ROOT = {
					declare_war_on = {
						target = PREV
						type = take_state_focus
						generator = { 104 }
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	focus = {
		id = SER_integrate_bosnia
		icon = GFX_goal_generic_improve_relations
		x = 0
		y = 3
		relative_position_id = SER_congress_of_belgrade

		cost = 10

		prerequisite = { focus = SER_free_bosnia }

		available = { owns_state = 104 } # Bosnia

		bypass = { 104 = { is_core_of = ROOT } }

		ai_will_do = { factor = 40 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_integrate_bosnia"
			add_state_core = 104 # Bosnia

			add_political_power = 100
		}
		search_filters = { FOCUS_FILTER_ANNEXATION FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = SER_claim_dalmatia
		icon = GFX_goal_generic_political_pressure
		x = 2
		y = 3
		relative_position_id = SER_congress_of_belgrade

		cost = 10

		prerequisite = { focus = SER_free_bosnia }

		available = {
			is_subject = no
			can_declare_war_on = 163.owner
			OR = {
				is_in_faction = no
				is_faction_leader = yes
			}
			163 = {
				any_neighbor_state = { is_owned_by = ROOT }
			}
		}

		will_lead_to_war_with = CRO
		will_lead_to_war_with = BOS
		will_lead_to_war_with = AUS
		will_lead_to_war_with = HUN

		available_if_capitulated = yes
		cancel_if_invalid = yes
		continue_if_invalid = no

		bypass = {
			163 = { is_owned_by_ROOT_or_subject = yes }
		}

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0.1
				is_in_faction = no
				NOT = { has_country_flag = waiting_to_attack_austria }
			}
			# don't attack Austria unless it's vulnerable or other countries are waiting to help
			modifier = {
				factor = 0
				163 = { owned_by_austria_or_puppet = yes }
				AUS = {
					is_subject = no
					is_faction_leader = yes
					surrender_progress < 0.10
					NOT = {
						has_war_with = GER
						has_war_with = RUS
						has_war_with = HUN
						has_war_with = POL
						has_war_with = ITA
					}
				}
				NOT = {
					POL = { has_country_flag = waiting_to_attack_austria }
					ITA = { has_country_flag = waiting_to_attack_austria }
				}
			}
			modifier = {
				factor = 5
				163 = { owned_by_austria_or_puppet = yes }
				OR = {
					AUS = { has_war_with = HUN }
					POL = { has_country_flag = waiting_to_attack_austria }
					ITA = { has_country_flag = waiting_to_attack_austria }
				}
			}
			modifier = {
				factor = 10
				has_country_flag = waiting_to_attack_austria
			}
			# don't attack if it's owned by someone other than Austria, who is not a puppet/faction member and is stronger
			modifier = {
				factor = 0
				NOT = { owns_state = 163 }
				163 = {
					owned_by_austria_or_puppet = no
					owner = {
						NOT = { is_subject_of = AUS }
						NOT = { is_in_faction_with = AUS }
						surrender_progress < 0.10
						strength_ratio = { tag = SER ratio > 1.0 }
					}
				}
			}
			# don't attack if it's owned by someone other than Austria, who is a puppet of a stronger overlord
			modifier = {
				factor = 0
				NOT = { owns_state = 163 }
				163 = {
					owned_by_austria_or_puppet = no
					owner = {
						is_subject = yes
						overlord = {
							NOT = { tag = AUS }
							surrender_progress < 0.10
							strength_ratio = { tag = SER ratio > 1.0 }
						}
					}
				}
			}
			# don't attack if it's owned by someone other than Austria, who is in a faction with a stronger leader
			modifier = {
				factor = 0
				NOT = { owns_state = 163 }
				163 = {
					owned_by_austria_or_puppet = no
					owner = {
						is_in_faction = yes
						is_faction_leader = no
						any_allied_country = {
							NOT = { tag = AUS }
							is_faction_leader = yes
							surrender_progress < 0.10
							strength_ratio = { tag = ROM ratio > 1.0 }
						}
					}
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_claim_dalmatia"
			add_state_claim = 163 # Dalmatia
			add_state_claim = 103 # Lika

			# Create a wargoal against the country that holds Dalmatia
			random_country = {
				limit = { owns_state = 163 } # Dalmatia
				ROOT = {
					declare_war_on = {
						target = PREV
						type = take_state_focus
						generator = { 163 103 }
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	focus = {
		id = SER_status_of_montenegro
		icon = GFX_goal_generic_more_territorial_claims
		x = 3
		y = 2
		relative_position_id = SER_congress_of_belgrade

		cost = 10

		bypass = {
			105 = { is_owned_by_ROOT_or_subject = yes }
		}

		prerequisite = {
			focus = SER_greater_serbia
			focus = SER_slavic_federation
		}

		available = {
			is_subject = no
			can_declare_war_on = 105.owner
			OR = {
				is_in_faction = no
				is_faction_leader = yes
			}
			105 = {
				any_neighbor_state = { is_owned_by = ROOT }
			}
		}

		will_lead_to_war_with = CRO
		will_lead_to_war_with = BOS
		will_lead_to_war_with = AUS
		will_lead_to_war_with = HUN

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 2
				105 = {
					owner = {
						has_war = yes
					}
				}
			}
			# don't attack Austria unless it's vulnerable or other countries are waiting to help
			modifier = {
				factor = 0
				105 = { owned_by_austria_or_puppet = yes }
				AUS = {
					is_subject = no
					is_faction_leader = yes
					surrender_progress < 0.10
					NOT = {
						has_war_with = GER
						has_war_with = RUS
						has_war_with = HUN
						has_war_with = POL
						has_war_with = ITA
					}
				}
				NOT = {
					POL = { has_country_flag = waiting_to_attack_austria }
					ITA = { has_country_flag = waiting_to_attack_austria }
				}
			}
			modifier = {
				factor = 5
				105 = { owned_by_austria_or_puppet = yes }
				OR = {
					AUS = { has_war_with = HUN }
					POL = { has_country_flag = waiting_to_attack_austria }
					ITA = { has_country_flag = waiting_to_attack_austria }
				}
			}
			modifier = {
				factor = 10
				has_country_flag = waiting_to_attack_austria
			}
			# don't attack if it's owned by someone other than Austria, who is not a puppet/faction member and is stronger
			modifier = {
				factor = 0
				NOT = { owns_state = 105 }
				105 = {
					owned_by_austria_or_puppet = no
					owner = {
						NOT = { is_subject_of = AUS }
						NOT = { is_in_faction_with = AUS }
						surrender_progress < 0.10
						strength_ratio = { tag = SER ratio > 1.0 }
					}
				}
			}
			# don't attack if it's owned by someone other than Austria, who is a puppet of a stronger overlord
			modifier = {
				factor = 0
				NOT = { owns_state = 105 }
				105 = {
					owned_by_austria_or_puppet = no
					owner = {
						is_subject = yes
						overlord = {
							NOT = { tag = AUS }
							surrender_progress < 0.10
							strength_ratio = { tag = SER ratio > 1.0 }
						}
					}
				}
			}
			# don't attack if it's owned by someone other than Austria, who is in a faction with a stronger leader
			modifier = {
				factor = 0
				NOT = { owns_state = 105 }
				105 = {
					owned_by_austria_or_puppet = no
					owner = {
						is_in_faction = yes
						is_faction_leader = no
						any_allied_country = {
							NOT = { tag = AUS }
							is_faction_leader = yes
							surrender_progress < 0.10
							strength_ratio = { tag = ROM ratio > 1.0 }
						}
					}
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_status_of_montenegro"
			105 = {
				owner = {
					if = {
						limit = {
							is_subject = yes
							is_ai = no
						}
						overlord = {
							country_event = {
								id = serbia.16
								hours = 2
							}
						}
						else = {
							country_event = {
								id = serbia.16
								hours = 2
							}
						}
					}
				}
			}
		}
	}

	focus = {
		id = SER_form_yugoslavia
		icon = GFX_goal_SER_form_yugoslavia
		x = 4
		y = 4
		relative_position_id = SER_congress_of_belgrade

		cost = 10

		prerequisite = { focus = SER_slavic_federation }
		prerequisite = { focus = SER_status_of_montenegro }
		prerequisite = { focus = SER_claim_dalmatia }

		available = {
			AND = {
				owns_state = 45 # Vojvodina
				owns_state = 109 # Eastern Croatia
				owns_state = 104 # Bosnia
			}
			OR = {
				owns_state = 105 # Montenegro
				MTN = { is_subject_of = ROOT }
			}
			NOT = {
				country_exists = CRO
				country_exists = BOS
			}
		}

		ai_will_do = { factor = 100 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_form_yugoslavia"
			custom_effect_tooltip = SER_form_yugoslavia_tooltip

			# Yugoslavia is just a cosmetic tag for now
			set_cosmetic_tag = SER_YUG

			# Change all party names with "Serbian" in their name
			hidden_effect = {
				set_party_name = {
					ideology = authoritarian_democrat
					name = SER_YUG_authoritarian_democrat_party
					long_name = SER_YUG_authoritarian_democrat_party_long
				}

				set_party_name = {
					ideology = paternal_autocrat
					name = SER_YUG_paternal_autocrat_party
					long_name = SER_YUG_paternal_autocrat_party_long
				}

				set_party_name = {
					ideology = national_populist
					name = SER_YUG_national_populist_party
					long_name = SER_YUG_national_populist_party_long
				}
			}

			# Core all Yugoslavian states
			add_state_core = 45 # Vojvodina
			add_state_core = 875 # Eastern Banat
			add_state_core = 794 # Srijem
			add_state_core = 105 # Montenegro
			add_state_core = 104 # Bosnia
			add_state_core = 109 # Croatia
			add_state_core = 163 # Dalmatia
			add_state_core = 103 # Lika
			if = {
				limit = { owns_state = 102 }
				add_state_core = 102 # Slovenia
			}
			if = {
				limit = { owns_state = 736 }
				add_state_core = 736 # Küstenland
			}

			# Inherit Montenegro if it is a puppet
			if = {
				limit = { MTN = { is_subject_of = ROOT } }
				annex_country = { target = MTN }
			}

			hidden_effect = { news_event = { id = worldnews.119 } }
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	focus = {
		id = SER_claim_slovenia
		icon = GFX_goal_generic_major_war
		x = 3
		y = 5
		relative_position_id = SER_congress_of_belgrade

		cost = 10

		prerequisite = { focus = SER_form_yugoslavia }

		available = {
			is_subject = no
			OR = {
				is_in_faction = no
				is_faction_leader = yes
			}
			OR = {
				owns_state = 102
				AND = {
					can_declare_war_on = 102.owner
					102 = {
						any_neighbor_state = { is_owned_by = ROOT }
					}
				}
			}
		}

		will_lead_to_war_with = AUS

		available_if_capitulated = yes
		cancel_if_invalid = yes
		continue_if_invalid = no

		bypass = { 102 = { is_core_of = ROOT } } # Slovenia

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				has_war = yes
			}
			# don't attack Austria unless it's vulnerable or other countries are waiting to help
			modifier = {
				factor = 0
				102 = { owned_by_austria_or_puppet = yes }
				AUS = {
					is_subject = no
					is_faction_leader = yes
					surrender_progress < 0.10
					NOT = {
						has_war_with = GER
						has_war_with = RUS
						has_war_with = HUN
						has_war_with = POL
						has_war_with = ITA
					}
				}
				NOT = {
					POL = { has_country_flag = waiting_to_attack_austria }
					ITA = { has_country_flag = waiting_to_attack_austria }
				}
			}
			modifier = {
				factor = 5
				102 = { owned_by_austria_or_puppet = yes }
				OR = {
					AUS = { has_war_with = HUN }
					POL = { has_country_flag = waiting_to_attack_austria }
					ITA = { has_country_flag = waiting_to_attack_austria }
				}
			}
			modifier = {
				factor = 10
				has_country_flag = waiting_to_attack_austria
			}
			# don't attack if it's owned by someone other than Austria, who is not a puppet/faction member and is stronger
			modifier = {
				factor = 0
				NOT = { owns_state = 102 }
				102 = {
					NOT = {
						owned_by_austria_or_puppet = yes
					}
					owner = {
						NOT = { is_subject_of = AUS }
						NOT = { is_in_faction_with = AUS }
						surrender_progress < 0.10
						strength_ratio = { tag = SER ratio > 1.0 }
					}
				}
			}
			# don't attack if it's owned by someone other than Austria, who is a puppet of a stronger overlord
			modifier = {
				factor = 0
				NOT = { owns_state = 102 }
				102 = {
					NOT = {
						owned_by_austria_or_puppet = yes
					}
					owner = {
						is_subject = yes
						overlord = {
							NOT = { tag = AUS }
							surrender_progress < 0.10
							strength_ratio = { tag = SER ratio > 1.0 }
						}
					}
				}
			}
			# don't attack if it's owned by someone other than Austria, who is in a faction with a stronger leader
			modifier = {
				factor = 0
				NOT = { owns_state = 102 }
				102 = {
					NOT = { owned_by_austria_or_puppet = yes }
					owner = {
						is_in_faction = yes
						is_faction_leader = no
						any_allied_country = {
							NOT = { tag = AUS }
							is_faction_leader = yes
							surrender_progress < 0.10
							strength_ratio = { tag = ROM ratio > 1.0 }
						}
					}
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_claim_slovenia"
			add_state_core = 102
			add_state_core = 736
			if = {
				limit = {
					can_declare_war_on = 102.owner
				}
				declare_war_on = {
					target = 102.owner
					type = take_state_focus
					generator = { 102 736 }
				}
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	focus = {
		id = SER_a_serbian_nation
		icon = GFX_goal_serbia
		x = -2
		y = 4
		relative_position_id = SER_congress_of_belgrade

		cost = 10

		prerequisite = { focus = SER_albanian_question }
		prerequisite = { focus = SER_integrate_bosnia }

		available = {
			AND = {
				owns_state = 45 # Vojvodina
				owns_state = 104 # Bosnia
			}
			NOT = { country_exists = BOS }
		}

		ai_will_do = { factor = 50 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_a_serbian_nation"
			# Core all of Greater Serbia
			add_state_core = 45 # Vojvodina
			add_state_core = 875 # Eastern Banat
			add_state_core = 794 # Srijem
			add_state_core = 105 # Montenegro
			add_state_core = 163 # Dalmatia
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	focus = {
		id = SER_extra_research_slot_ii
		icon = GFX_goal_military_research
		x = 0
		y = 5
		relative_position_id = SER_congress_of_belgrade

		cost = 10

		prerequisite = {
			focus = SER_a_serbian_nation
			focus = SER_form_yugoslavia
		}

		ai_will_do = { factor = 20 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_extra_research_slot_ii"
			add_research_slot = 1
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	###############
	### Economy ###
	###############

	focus = {
		id = SER_new_economic_policy
		icon = GFX_goal_generic_consumer_goods
		x = 22
		y = 0

		cost = 10

		ai_will_do = { factor = 10 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_new_economic_policy"
			add_tech_bonus = {
				name = SER_new_economic_policy
				bonus = 1
				uses = 1
				category = industry
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	# Agriculture
	focus = {
		id = SER_agriculture
		icon = GFX_goal_agrarian_reform
		x = -1
		y = 1
		relative_position_id = SER_new_economic_policy

		cost = 10

		ai_will_do = { factor = 30 }

		prerequisite = { focus = SER_new_economic_policy }

		mutually_exclusive = { focus = SER_industry }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_agriculture"
			add_tech_bonus = {
				name = SER_agriculture
				bonus = 1
				uses = 1
				category = industry
			}

			# 2x 1 civ factory & 2 building slots
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SER_invest_in_railroads
		icon = GFX_goal_generic_railway_construction
		x = 0
		y = 2
		relative_position_id = SER_new_economic_policy

		cost = 10

		ai_will_do = { factor = 7 }

		prerequisite = {
			focus = SER_industry
			focus = SER_agriculture
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_invest_in_railroads"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 1
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 1
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = SER_support_peasants
		icon = GFX_goal_generic_construct_civ_factory
		x = -1
		y = 3
		relative_position_id = SER_new_economic_policy

		cost = 10

		ai_will_do = { factor = 10 }

		prerequisite = { focus = SER_agriculture }
		prerequisite = { focus = SER_invest_in_railroads }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_support_peasants"
			add_tech_bonus = {
				name = SER_support_peasants
				bonus = 1
				uses = 1
				category = industry
			}

			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SER_mechanisation
		icon = GFX_goal_generic_production2
		x = -1
		y = 4
		relative_position_id = SER_new_economic_policy

		cost = 10

		ai_will_do = { factor = 5 }

		prerequisite = { focus = SER_support_peasants }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_mechanisation"
			add_tech_bonus = {
				name = SER_mechanisation
				bonus = 1
				uses = 1
				category = industry
			}

			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }
	}

	# Industry
	focus = {
		id = SER_industry
		icon = GFX_goal_generic_construction
		x = 1
		y = 1
		relative_position_id = SER_new_economic_policy

		cost = 10

		ai_will_do = { factor = 30 }

		prerequisite = { focus = SER_new_economic_policy }

		mutually_exclusive = { focus = SER_agriculture }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_industry"
			# 1x civ, 2x military factories
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = SER_war_industry
		icon = GFX_goal_generic_construct_mil_factory
		x = 1
		y = 3
		relative_position_id = SER_new_economic_policy

		cost = 10

		ai_will_do = { factor = 7 }

		prerequisite = { focus = SER_industry }
		prerequisite = { focus = SER_invest_in_railroads }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_war_industry"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = SER_expand_bor_mining_complex
		icon = GFX_goal_generic_construction2
		x = 1
		y = 4
		relative_position_id = SER_new_economic_policy

		cost = 10

		ai_will_do = { factor = 7 }

		prerequisite = { focus = SER_war_industry }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_expand_bor_mining_complex"
			add_resource = { type = steel amount = 10 state = 767 }
			add_resource = { type = tungsten amount = 5 state = 767 }
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = SER_extra_research_slot
		icon = GFX_focus_research
		x = 0
		y = 5
		relative_position_id = SER_new_economic_policy

		cost = 10

		ai_will_do = { factor = 20 }

		prerequisite = {
			focus = SER_mechanisation
			focus = SER_expand_bor_mining_complex
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_extra_research_slot"
			add_research_slot = 1
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	###################
	### Army Reform ###
	###################

	focus = {
		id = SER_army_reform_nedic
		icon = GFX_goal_generic_army_artillery
		x = 25
		y = 0

		cost = 10

		mutually_exclusive = { focus = SER_army_reform_mihailovic }

		ai_will_do = {
			factor = 20
			modifier = {
				factor = 0
				already_has_other_doctrine_SF = yes
			}
		}

		available_if_capitulated = yes

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_army_reform_nedic"
			army_experience = 20

			add_tech_bonus = {
				name = SER_army_reform_nedic
				bonus = 1
				uses = 1
				category = cat_superior_firepower
			}
		}
		search_filters = { FOCUS_FILTER_ARMY_BONUS FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SER_expand_artillery_factories
		icon = GFX_goal_generic_army_artillery2
		x = 0
		y = 1
		relative_position_id = SER_army_reform_nedic

		cost = 10

		prerequisite = { focus = SER_army_reform_nedic }

		ai_will_do = { factor = 10 }

		available_if_capitulated = yes

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_expand_artillery_factories"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}

			add_tech_bonus = {
				name = SER_expand_artillery_factories
				bonus = 1
				uses = 1
				category = artillery
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SER_motorisation_effort
		icon = GFX_goal_generic_armored_cars
		x = 0
		y = 2
		relative_position_id = SER_army_reform_nedic

		cost = 10

		prerequisite = { focus = SER_expand_artillery_factories }

		ai_will_do = { factor = 7 }

		available_if_capitulated = yes

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_motorisation_effort"
			add_tech_bonus = {
				name = SER_motorisation_effort
				bonus = 1
				uses = 1
				category = motorized_equipment
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SER_army_tactics_nedic
		icon = GFX_goal_GEO_Artillery_Tactics
		x = 0
		y = 3
		relative_position_id = SER_army_reform_nedic

		cost = 10

		prerequisite = { focus = SER_motorisation_effort }

		ai_will_do = { factor = 10 }

		available_if_capitulated = yes

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_army_tactics_nedic"
			army_experience = 5

			add_tech_bonus = {
				name = SER_army_tactics_nedic
				bonus = 1
				uses = 2
				category = cat_superior_firepower
			}
		}
		search_filters = { FOCUS_FILTER_ARMY_BONUS FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SER_armour_effort
		icon = GFX_goal_generic_army_tanks
		x = 0
		y = 4
		relative_position_id = SER_army_reform_nedic

		cost = 10

		prerequisite = { focus = SER_army_tactics_nedic }

		ai_will_do = { factor = 7 }

		available_if_capitulated = yes

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_armour_effort"
			add_tech_bonus = {
				name = SER_armour_effort
				bonus = 1
				uses = 1
				category = armor
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SER_patriotic_spirit
		icon = GFX_goal_generic_build_tank
		x = 0
		y = 5
		relative_position_id = SER_army_reform_nedic

		cost = 10

		prerequisite = { focus = SER_armour_effort }

		available_if_capitulated = yes

		ai_will_do = {
			factor = 15

			modifier = {
				factor = 3
				has_war = yes
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_patriotic_spirit"
			add_ideas = SER_patriotic_spirit_idea
		}
		search_filters = { FOCUS_FILTER_ARMY_BONUS FOCUS_FILTER_MANPOWER }
	}

	# Mihailovic
	focus = {
		id = SER_army_reform_mihailovic
		icon = GFX_goal_generic_join_faction
		x = 2
		y = 0
		relative_position_id = SER_army_reform_nedic

		cost = 10

		mutually_exclusive = { focus = SER_army_reform_nedic }

		ai_will_do = {
			factor = 20
			modifier = {
				factor = 0
				already_has_other_doctrine_GBP = yes
			}
		}

		available_if_capitulated = yes

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_army_reform_mihailovic"
			army_experience = 20

			add_tech_bonus = {
				name = SER_army_reform_mihailovic
				bonus = 1
				uses = 1
				category = cat_grand_battle_plan
			}
		}
		search_filters = { FOCUS_FILTER_ARMY_BONUS FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SER_special_forces
		icon = GFX_goal_generic_special_forces
		x = 2
		y = 1
		relative_position_id = SER_army_reform_nedic

		cost = 10

		prerequisite = { focus = SER_army_reform_mihailovic }

		ai_will_do = { factor = 7 }

		available_if_capitulated = yes

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_special_forces"
			add_tech_bonus = {
				name = SER_special_forces
				bonus = 1
				uses = 1
				technology = paratroopers
				technology = paratroopers2
				technology = marines
				technology = marines2
				technology = tech_mountaineers
				technology = tech_mountaineers2
				technology = tech_mountaineers3
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SER_expand_infantry_weapons_factories
		icon = GFX_goal_generic_small_arms
		x = 2
		y = 2
		relative_position_id = SER_army_reform_nedic

		cost = 10

		prerequisite = { focus = SER_special_forces }

		ai_will_do = {
			factor = 20

			modifier = {
				factor = 2
				has_war = yes
			}
		}

		available_if_capitulated = yes

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_expand_infantry_weapons_factories"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}

			add_tech_bonus = {
				name = SER_expand_infantry_weapons_factories
				bonus = 1
				uses = 1
				category = infantry_weapons
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SER_bunker_focus
		icon = GFX_goal_nested_fortifications
		x = 2
		y = 3
		relative_position_id = SER_army_reform_nedic

		cost = 10

		prerequisite = { focus = SER_expand_infantry_weapons_factories }

		ai_will_do = {
			factor = 10

			modifier = {
				factor = 2
				has_war = yes
			}
		}

		available_if_capitulated = yes

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_bunker_focus"
			if = {
				limit = { SER = { controls_state = 107 } }
				107 = {
					add_building_construction = {
						type = bunker
						level = 1
						province = 11586
						instant_build = yes
					}
				}
			}

			add_ideas = SER_bunker_focus_idea
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = SER_army_tactics_mihailovic
		icon = GFX_goal_generic_army_doctrines
		x = 2
		y = 4
		relative_position_id = SER_army_reform_nedic

		cost = 10

		prerequisite = { focus = SER_bunker_focus }

		ai_will_do = { factor = 10 }

		available_if_capitulated = yes

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_army_tactics_mihailovic"
			army_experience = 5

			add_tech_bonus = {
				name = SER_army_tactics_mihailovic
				bonus = 1
				uses = 2
				category = cat_grand_battle_plan
			}
		}
		search_filters = { FOCUS_FILTER_ARMY_BONUS FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SER_mobilisation_of_the_masses
		icon = GFX_goal_national_mobilization
		x = 2
		y = 5
		relative_position_id = SER_army_reform_nedic

		cost = 10

		prerequisite = { focus = SER_army_tactics_mihailovic }

		ai_will_do = {
			factor = 15

			modifier = {
				factor = 3
				has_war = yes
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_mobilisation_of_the_masses"
			add_ideas = SER_mobilisation_of_the_masses_idea
		}
		search_filters = { FOCUS_FILTER_MANPOWER }
	}

	#################
	### Air Force ###
	#################

	focus = {
		id = SER_expand_air_force
		icon = GFX_goal_new_airforce
		x = 32
		y = 0

		cost = 10

		ai_will_do = { factor = 5 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_expand_air_force"
			air_experience = 25

			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = air_base
						size > 1
					}
				}
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}

			add_tech_bonus = {
				name = SER_expand_air_force
				bonus = 1
				uses = 1
				category = air_doctrine
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY FOCUS_FILTER_AIRFORCE_BONUS }
	}

	focus = {
		id = SER_fighter_focus
		icon = GFX_goal_generic_air_fighter
		x = -3
		y = 1
		relative_position_id = SER_expand_air_force

		cost = 10

		prerequisite = { focus = SER_expand_air_force }
		mutually_exclusive = { focus = SER_heavy_fighter_focus }

		ai_will_do = { factor = 5 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_fighter_focus"
			add_tech_bonus = {
				name = SER_fighter_focus
				bonus = 1
				uses = 1
				category = light_fighter
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SER_heavy_fighter_focus
		icon = GFX_goal_generic_air_fighter2
		x = -1
		y = 1
		relative_position_id = SER_expand_air_force

		cost = 10

		prerequisite = { focus = SER_expand_air_force }
		mutually_exclusive = { focus = SER_fighter_focus }

		ai_will_do = { factor = 2 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_heavy_fighter_focus"
			add_tech_bonus = {
				name = SER_heavy_fighter_focus
				bonus = 1
				uses = 1
				category = cat_heavy_fighter
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SER_bomber_focus
		icon = GFX_goal_generic_air_bomber
		x = 1
		y = 1
		relative_position_id = SER_expand_air_force

		cost = 10

		prerequisite = { focus = SER_expand_air_force }
		mutually_exclusive = { focus = SER_cas_effort }

		ai_will_do = { factor = 5 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_bomber_focus"
			add_tech_bonus = {
				name = SER_bomber_focus
				bonus = 1
				uses = 1
				category = tactical_bomber
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SER_cas_effort
		icon = GFX_goal_generic_CAS
		x = 3
		y = 1
		relative_position_id = SER_expand_air_force

		cost = 10

		prerequisite = { focus = SER_expand_air_force }
		mutually_exclusive = { focus = SER_bomber_focus }

		ai_will_do = { factor = 2 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_cas_effort"
			add_tech_bonus = {
				name = SER_cas_effort
				bonus = 1
				uses = 1
				category = cas_bomber
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SER_air_tactics
		icon = GFX_goal_generic_air_doctrine
		x = -3
		y = 2
		relative_position_id = SER_expand_air_force

		cost = 10

		prerequisite = {
			focus = SER_fighter_focus
			focus = SER_heavy_fighter_focus
		}
		prerequisite = {
			focus = SER_bomber_focus
			focus = SER_cas_effort
		}

		ai_will_do = { factor = 3 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_air_tactics"
			air_experience = 25

			add_tech_bonus = {
				name = SER_air_tactics
				bonus = 1
				uses = 2
				category = air_doctrine
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_AIRFORCE_BONUS }
	}

	focus = {
		id = SER_expand_airfields
		icon = GFX_goal_generic_air_production
		x = -1
		y = 2
		relative_position_id = SER_expand_air_force

		cost = 10

		prerequisite = {
			focus = SER_fighter_focus
			focus = SER_heavy_fighter_focus
		}
		prerequisite = {
			focus = SER_bomber_focus
			focus = SER_cas_effort
		}

		ai_will_do = { factor = 3 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_expand_airfields"
			air_experience = 20

			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = air_base
						size > 1
					}
				}
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}

			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = air_base
						size > 1
					}
				}
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_AIRFORCE_BONUS }
	}

	focus = {
		id = SER_rocket_effort
		icon = GFX_focus_rocketry
		x = 1
		y = 2
		relative_position_id = SER_expand_air_force

		cost = 10

		prerequisite = {
			focus = SER_fighter_focus
			focus = SER_heavy_fighter_focus
		}
		prerequisite = {
			focus = SER_bomber_focus
			focus = SER_cas_effort
		}

		ai_will_do = {
			factor = 1

			modifier = {
				factor = 5
				date > 1942.1.1
			}
			modifier = {
				factor = 2
				date > 1944.1.1
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_rocket_effort"
			add_tech_bonus = {
				name = SER_rocket_effort
				bonus = 1
				uses = 1
				category = rocketry
				category = jet_technology
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SER_paratrooper_effort
		icon = GFX_focus_generic_paratrooper
		x = 3
		y = 2
		relative_position_id = SER_expand_air_force

		cost = 10

		prerequisite = {
			focus = SER_fighter_focus
			focus = SER_heavy_fighter_focus
		}
		prerequisite = {
			focus = SER_bomber_focus
			focus = SER_cas_effort
		}

		ai_will_do = { factor = 1 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_paratrooper_effort"
			add_tech_bonus = {
				name = SER_paratrooper_effort
				bonus = 1
				uses = 1
				technology = paratroopers
				technology = paratroopers2
				technology = paratroopers3
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	############
	### Navy ###
	############

	focus = {
		id = SER_birth_of_the_navy
		icon = GFX_goal_navy_hat_ships
		x = 31
		y = 3

		cost = 10

		available = {
			any_owned_state = { is_coastal = yes }
		}

		ai_will_do = {
			factor = 3

			modifier = {
				factor = 5

				date > 1942.1.1
			}

			modifier = {
				factor = 5

				date > 1943.6.1
			}

			modifier = {
				factor = 5

				has_completed_focus = SER_form_yugoslavia
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_birth_of_the_navy"
			random_owned_controlled_state = {
				limit = {
					is_coastal = yes
					free_building_slots = {
						building = dockyard
						size > 2
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = dockyard
					level = 3
					instant_build = yes
				}
			}

			random_owned_controlled_state = {
				limit = { naval_base > 1 }

				add_building_construction = {
					type = naval_base
					province = {
						all_provinces = yes
						limit_to_naval_base = yes
						level > 1
					}
					level = 1
					instant_build = yes
				}
			}

			navy_experience = 50
		}
		search_filters = { FOCUS_FILTER_NAVY_BONUS FOCUS_FILTER_INDUSTRY }
	}


	focus = {
		id = SER_build_first_ships
		icon = GFX_goal_generic_navy_cruiser
		x = 2
		y = 0
		relative_position_id = SER_birth_of_the_navy

		cost = 10

		available = {
			any_owned_state = { is_coastal = yes }
		}

		ai_will_do = { factor = 5 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_build_first_ships"
			if = {
				limit = {
					has_dlc = "Man the Guns"
					NOT = {
						has_tech = early_torpedo
					}
				}
				set_technology = { early_torpedo = 1 }
			}
			if = {
				limit = {
					has_dlc = "Man the Guns"
					NOT = {
						has_tech = weltkrieg_naval_gunnery
					}
				}
				set_technology = { weltkrieg_naval_gunnery = 1 }
			}
			if = {
				limit = {
					has_dlc = "Man the Guns"
					NOT = {
						has_tech = weltkrieg_cruiser_hull
						has_tech = weltkrieg_cruiser_nonmtg
					}
				}
				set_technology = { weltkrieg_cruiser_hull = 1 }
			}
			if = {
				limit = {
					NOT = {
						has_dlc = "Man the Guns"
					}
					NOT = {
						has_tech = weltkrieg_cruiser_hull
						has_tech = weltkrieg_cruiser_nonmtg
					}
				}
				set_technology = { weltkrieg_cruiser_nonmtg = 1 }
			}
			if = {
				limit = {
					has_dlc = "Man the Guns"
					NOT = {
						has_tech = weltkrieg_light_ship_hull
						has_tech = weltkrieg_destroyer_nonmtg
					}
				}
				set_technology = { weltkrieg_light_ship_hull = 1 }
			}
			if = {
				limit = {
					NOT = {
						has_dlc = "Man the Guns"
					}
					NOT = {
						has_tech = weltkrieg_light_ship_hull
						has_tech = weltkrieg_destroyer_nonmtg
					}
				}
				set_technology = { weltkrieg_destroyer_nonmtg = 1 }
			}
			country_event = serbia.19	# Event to choose to build ships or not
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SER_expand_ports
		icon = GFX_goal_generic_construct_naval_dockyard
		x = -2
		y = 1
		relative_position_id = SER_birth_of_the_navy

		cost = 10

		ai_will_do = { factor = 3 }

		prerequisite = { focus = SER_build_first_ships }
		prerequisite = { focus = SER_birth_of_the_navy }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_expand_ports"
			random_owned_controlled_state = {
				limit = { naval_base > 1 }

				add_building_construction = {
					type = naval_base
					province = {
						all_provinces = yes
						limit_to_naval_base = yes
						level > 1
					}
					level = 2
					instant_build = yes
				}
			}

			random_owned_controlled_state = {
				limit = { naval_base > 0 }

				add_building_construction = {
					type = naval_base
					province = {
						all_provinces = yes
						limit_to_naval_base = yes
						level > 0
					}
					level = 2
					instant_build = yes
				}
			}

			random_owned_controlled_state = {
				limit = {
					is_coastal = yes
					free_building_slots = {
						building = dockyard
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = SER_fleet_maneuvers
		icon = GFX_goal_generic_coastal_navy
		x = 0
		y = 1
		relative_position_id = SER_birth_of_the_navy

		cost = 10

		ai_will_do = { factor = 2 }

		prerequisite = { focus = SER_build_first_ships }
		prerequisite = { focus = SER_birth_of_the_navy }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_fleet_maneuvers"
			navy_experience = 25

			add_tech_bonus = {
				name = SER_fleet_maneuvers
				bonus = 1
				uses = 2
				category = naval_doctrine
			}
		}
		search_filters = { FOCUS_FILTER_NAVY_BONUS FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SER_buy_hms_lion
		icon = GFX_goal_generic_navy_battleship
		x = 2
		y = 1
		relative_position_id = SER_birth_of_the_navy

		cost = 10

		ai_will_do = { factor = 10 }

		prerequisite = { focus = SER_build_first_ships }
		prerequisite = { focus = SER_birth_of_the_navy }

		mutually_exclusive = { focus = SER_cruiser_effort }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_buy_hms_lion"
			if = {
				limit = {
					CAN = {
						exists = yes
						is_subject = no
						NOT = {
							has_war_with = SER
						}
					}
				}

				CAN = { country_event = { id = serbia.20 hours = 6 } }

				else = {
					add_tech_bonus = {
						name = SER_buy_hms_lion
						bonus = 1
						uses = 1
						category = cl_tech
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SER_cruiser_effort
		icon = GFX_goal_generic_occupy_states_coastal
		x = 4
		y = 1
		relative_position_id = SER_birth_of_the_navy

		cost = 10

		ai_will_do = { factor = 3 }

		prerequisite = { focus = SER_build_first_ships }
		prerequisite = { focus = SER_birth_of_the_navy }

		mutually_exclusive = { focus = SER_buy_hms_lion }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_cruiser_effort"
			add_tech_bonus = {
				name = SER_cruiser_effort
				bonus = 1
				uses = 1
				category = ca_tech
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SER_focus_on_submarines
		icon = GFX_goal_generic_navy_submarine
		x = -2
		y = 2
		relative_position_id = SER_birth_of_the_navy

		cost = 10

		ai_will_do = { factor = 8 }

		prerequisite = { focus = SER_expand_ports }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_focus_on_submarines"
			set_technology = { weltkrieg_submarine_hull = 1 }

			add_tech_bonus = {
				name = SER_focus_on_submarines
				bonus = 1
				uses = 1
				category = ss_tech
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SER_build_destroyers
		icon = GFX_goal_generic_wolf_pack
		x = 3
		y = 2
		relative_position_id = SER_birth_of_the_navy

		cost = 10

		ai_will_do = { factor = 3 }

		prerequisite = { focus = SER_buy_hms_lion focus = SER_cruiser_effort }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_build_destroyers"
			add_tech_bonus = {
				name = SER_build_destroyers
				bonus = 1
				uses = 1
				category = dd_tech
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SER_invest_in_light_cruisers
		icon = GFX_goal_generic_navy_cruiser
		x = 0
		y = 2
		relative_position_id = SER_birth_of_the_navy

		cost = 10

		ai_will_do = { factor = 2 }

		prerequisite = { focus = SER_fleet_maneuvers }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SER_invest_in_light_cruisers"
			navy_experience = 25

			add_tech_bonus = {
				name = SER_invest_in_light_cruisers
				bonus = 1
				uses = 1
				category = cl_tech
			}
		}
		search_filters = { FOCUS_FILTER_NAVY_BONUS FOCUS_FILTER_RESEARCH }
	}
}
