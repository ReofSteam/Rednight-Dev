################################
### Cuban Democratic Focuses ###
################################
###       By Pietrus         ###
################################

focus_tree = {
	id = CUB_democratic_focuses
	country = {
		factor = 0
		modifier = {
			add = 10
			tag = CUB
		}
	}
	default = no
	continuous_focus_position = { x = 150 y = 900 }

	shared_focus = CUB_democracy_survives
	shared_focus = CUB_new_economic_expansion
	shared_focus = CUB_foreign_relate
	shared_focus = CUB_begin_mil_reform
}

shared_focus = {
	id = CUB_democracy_survives
	icon = GFX_goal_liberty
	x = 4
	y = 0
	cost = 1

	available = {
		custom_trigger_tooltip = {
			always = no
			tooltip = bypass8_tooltip
		}
	}

	ai_will_do = {
		factor = 15
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_democracy_survives"
		custom_effect_tooltip = cubanoeffect_tooltip
	}
}

shared_focus = {
	id = CUB_march_institutions
	icon = GFX_goal_government_icon
	x = -2
	y = 1
	relative_position_id = CUB_democracy_survives
	cost = 10

	ai_will_do = {
		factor = 15
	}

	available = {
		OR = {
			has_government = social_democrat
			has_government = social_liberal
			has_government = market_liberal
			has_government = social_conservative
		}
	}

	prerequisite = {
		focus = CUB_democracy_survives
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_march_institutions"
		add_stability = 0.05
		if = {
			limit = {
				has_government = social_democrat
			}
			add_popularity = {
				ideology = social_democrat
				popularity = 0.1
			}
		}
		if = {
			limit = {
				has_government = social_liberal
			}
			add_popularity = {
				ideology = social_liberal
				popularity = 0.1
			}
		}
		if = {
			limit = {
				has_government = market_liberal
			}
			add_popularity = {
				ideology = market_liberal
				popularity = 0.1
			}
		}
	}
	search_filters = { FOCUS_FILTER_STABILITY }
}

shared_focus = {
	id = CUB_milaudit
	icon = GFX_goal_break_rifle
	x = -3
	y = 2
	relative_position_id = CUB_democracy_survives
	cost = 4

	ai_will_do = {
		factor = 15
	}

	available = {
		OR = {
			has_government = social_democrat
			has_government = social_liberal
			has_government = market_liberal
			has_government = social_conservative
		}
	}

	prerequisite = {
		focus = CUB_march_institutions
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_milaudit"
		add_timed_idea = {
			idea = CUB_permaudit_idea
			days = 60
		}
		add_political_power = 200
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CUB_loosenspeech
	icon = GFX_goal_big_news
	x = -1
	y = 2
	relative_position_id = CUB_democracy_survives
	cost = 3

	ai_will_do = {
		factor = 15
	}

	available = {
		OR = {
			has_government = social_democrat
			has_government = social_liberal
			has_government = market_liberal
			has_government = social_conservative
		}
	}

	prerequisite = {
		focus = CUB_march_institutions
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_loosenspeech"
		add_popularity = {
			ideology = social_democrat
			popularity = 0.03
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.03
		}
		add_popularity = {
			ideology = market_liberal
			popularity = 0.03
		}
		add_political_power = 50
		add_stability = -0.03
		add_war_support = -0.03
	}
	search_filters = { FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY }
}

shared_focus = {
	id = CUB_econ_rappro
	icon = GFX_goal_generic_improve_relations
	x = 2
	y = 1
	relative_position_id = CUB_democracy_survives
	cost = 8

	ai_will_do = {
		factor = 15
	}

	available = {
		OR = {
			has_government = social_democrat
			has_government = social_liberal
			has_government = market_liberal
			has_government = social_conservative
		}
	}

	prerequisite = {
		focus = CUB_democracy_survives
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_econ_rappro"
		add_ideas = CUB_demecon_idea
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = CUB_clean_slate
	icon = GFX_goal_white_star
	x = 1
	y = 2
	relative_position_id = CUB_democracy_survives
	cost = 8

	ai_will_do = {
		factor = 15
	}

	available = {
		OR = {
			has_government = social_democrat
			has_government = social_liberal
			has_government = market_liberal
			has_government = social_conservative
		}
	}

	prerequisite = {
		focus = CUB_econ_rappro
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_clean_slate"
		if = {
			limit = {
				has_idea = CUB_demecon_idea
			}
			swap_ideas = {
				remove_idea = CUB_demecon_idea
				add_idea = CUB_demecon_idea_2
			}
		}
		else = {
			remove_ideas = CUB_demecon_idea_2
			army_experience = 25
			navy_experience = 25
			air_experience = 25
			add_stability = 0.05
			add_war_support = 0.05
			add_political_power = 200

		}
	}
	search_filters = { FOCUS_FILTER_NAVY_BONUS FOCUS_FILTER_INDUSTRY FOCUS_FILTER_STABILITY FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_POLITICAL FOCUS_FILTER_ARMY_BONUS FOCUS_FILTER_AIRFORCE_BONUS }
}

shared_focus = {
	id = CUB_empowerment
	icon = GFX_focus_generic_concessions
	x = 3
	y = 2
	relative_position_id = CUB_democracy_survives
	cost = 8

	ai_will_do = {
		factor = 15
	}

	available = {
		OR = {
			has_government = social_democrat
			has_government = social_liberal
			has_government = market_liberal
			has_government = social_conservative
		}
	}

	prerequisite = {
		focus = CUB_econ_rappro
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_empowerment"
		if = {
			limit = {
				has_idea = CUB_demecon_idea
			}
			swap_ideas = {
				remove_idea = CUB_demecon_idea
				add_idea = CUB_demecon_idea_2
			}
		}
		else = {
			remove_ideas = CUB_demecon_idea_2
			army_experience = 50
			navy_experience = 50
			air_experience = 50
			add_stability = 0.075
			add_war_support = 0.075
			add_political_power = 75
		}
	}
	search_filters = { FOCUS_FILTER_NAVY_BONUS FOCUS_FILTER_INDUSTRY FOCUS_FILTER_STABILITY FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_POLITICAL FOCUS_FILTER_ARMY_BONUS FOCUS_FILTER_AIRFORCE_BONUS }
}

shared_focus = {
	id = CUB_never_again
	icon = GFX_goal_graveyard
	x = 0
	y = 3
	relative_position_id = CUB_democracy_survives
	cost = 10

	ai_will_do = {
		factor = 15
	}

	available = {
		OR = {
			has_government = social_democrat
			has_government = social_liberal
			has_government = market_liberal
			has_government = social_conservative
		}
	}

	prerequisite = {
		focus = CUB_loosenspeech
	}
	prerequisite = {
		focus = CUB_milaudit
	}
	prerequisite = {
		focus = CUB_clean_slate
	}
	prerequisite = {
		focus = CUB_empowerment
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_never_again"
		add_manpower = 15000
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = CUB_consitutional_conv
	icon = GFX_goal_new_treaty
	x = -1
	y = 4
	relative_position_id = CUB_democracy_survives
	cost = 8

	ai_will_do = {
		factor = 15
	}

	available = {
		OR = {
			has_government = social_democrat
			has_government = social_liberal
			has_government = market_liberal
			has_government = social_conservative
		}
	}

	prerequisite = {
		focus = CUB_never_again
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_consitutional_conv"
		country_event = cuba.201
		set_country_flag = cubsuccconstscore
		set_country_flag = cublibconstscore
	}
}

shared_focus = {
	id = CUB_mod_reform
	icon = GFX_goal_constitutional_guarantees
	x = 1
	y = 4
	relative_position_id = CUB_democracy_survives
	cost = 6

	ai_will_do = {
		factor = 15
	}

	available = {
		OR = {
			has_government = social_democrat
			has_government = social_liberal
			has_government = market_liberal
			has_government = social_conservative
		}
	}

	prerequisite = {
		focus = CUB_never_again
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_mod_reform"
		add_stability = 0.05
		add_war_support = 0.05
	}
	search_filters = { FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_STABILITY }
}

shared_focus = {
	id = CUB_leg_marti
	icon = GFX_goal_cuba
	x = 0
	y = 5
	relative_position_id = CUB_democracy_survives
	cost = 9

	ai_will_do = {
		factor = 15
	}

	available = {
		OR = {
			has_government = social_democrat
			has_government = social_liberal
			has_government = market_liberal
			has_government = social_conservative
		}
	}

	prerequisite = {
		focus = CUB_consitutional_conv
	}
	prerequisite = {
		focus = CUB_mod_reform
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_leg_marti"
		add_timed_idea = {
			idea = CUB_optimism_idea
			days = 360
		}
	}
}
