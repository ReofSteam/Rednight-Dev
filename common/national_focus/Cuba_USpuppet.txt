############################
### Cuban Puppet Focuses ###
############################
###     By Pietrus       ###
############################

focus_tree = {
	id = CUB_uspuppet_focuses
	country = {
		factor = 0
		modifier = {
			add = 10
			tag = CUB
		}
	}
	default = no
	continuous_focus_position = { x = 550 y = 900 }

	shared_focus = CUB_puppet_begin
	shared_focus = CUB_new_economic_expansion
	shared_focus = CUB_foreign_relate
	shared_focus = CUB_begin_mil_reform
}

shared_focus = {
	id = CUB_puppet_begin
	icon = GFX_goal_usa
	x = 8
	y = 0
	cost = 1

	available = {
		custom_trigger_tooltip = {
			always = no
			tooltip = bypass8_tooltip
		}
	}

	ai_will_do = {
		factor = 15
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_puppet_begin"
		custom_effect_tooltip = cubanoeffect_tooltip
	}
}

shared_focus = {
	id = CUB_auth_continue
	icon = GFX_goal_ideology_authoritarian_democrat
	x = -5
	y = 1
	relative_position_id = CUB_puppet_begin
	cost = 1

	available = {
		custom_trigger_tooltip = {
			always = no
			tooltip = bypass9_tooltip
		}
	}

	prerequisite = {
		focus = CUB_puppet_begin
	}
	mutually_exclusive = {
		focus = CUB_democratize_auth
		focus = CUB_nomorelapdop
	}

	ai_will_do = {
		factor = 15
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_auth_continue"
		custom_effect_tooltip = cubanoeffect_tooltip
	}
}

shared_focus = {
	id = CUB_auth_continue_2
	icon = GFX_goal_agrarian_reform
	x = -6
	y = 2
	relative_position_id = CUB_puppet_begin
	cost = 5

	available = {
		has_government = authoritarian_democrat
	}

	prerequisite = {
		focus = CUB_auth_continue
	}
	bypass = {
		NOT = {
			country_exists = USA
		}
	}

	ai_will_do = {
		factor = 15
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_auth_continue_2"
		if = {
			limit = {
				has_idea =  CUB_american_puppet_idea
			}
			swap_ideas = {
				remove_idea = CUB_american_puppet_idea
				add_idea = CUB_american_puppet_idea_2
			}
		}
		else = {
			swap_ideas = {
				remove_idea = CUB_american_loyal_idea
				add_idea = CUB_american_loyal_idea_2
			}
		}
	}
	search_filters = { FOCUS_FILTER_ANNEXATION }
}

shared_focus = {
	id = CUB_auth_continue_3
	icon = GFX_goal_purge_opposition
	x = -4
	y = 2
	relative_position_id = CUB_puppet_begin
	cost = 5

	available = {
		has_government = authoritarian_democrat
	}

	prerequisite = {
		focus = CUB_auth_continue
	}

	ai_will_do = {
		factor = 15
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_auth_continue_3"
		add_stability = 0.05
		add_popularity = {
			ideology = market_liberal
			popularity = -0.05
		}
		add_popularity = {
			ideology = social_liberal
			popularity = -0.05
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.05
		}
	}
	search_filters = { FOCUS_FILTER_STABILITY }
}

shared_focus = {
	id = CUB_auth_continue_4
	icon = GFX_focus_ger_bulwark_against_bolshevism
	x = -7
	y = 3
	relative_position_id = CUB_puppet_begin
	cost = 10

	available = {
		has_government = authoritarian_democrat
	}

	prerequisite = {
		focus = CUB_auth_continue_2
	}
	prerequisite = {
		focus = CUB_auth_continue_3
	}

	ai_will_do = {
		factor = 15
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_auth_continue_4"
		add_ideas = CUB_anti_syndicalism
	}
}

shared_focus = {
	id = CUB_auth_continue_5
	icon = GFX_goal_checkmate
	x = -5
	y = 3
	relative_position_id = CUB_puppet_begin
	cost = 3

	available = {
		has_government = authoritarian_democrat
	}

	prerequisite = {
		focus = CUB_auth_continue_2
	}
	prerequisite = {
		focus = CUB_auth_continue_3
	}

	ai_will_do = {
		factor = 15
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_auth_continue_5"
		add_stability = -0.03
		add_war_support = -0.03
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = -0.03
		}
		add_political_power = 150
	}
	search_filters = { FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY }
}

shared_focus = {
	id = CUB_auth_continue_6
	icon = GFX_goal_generic_propaganda
	x = -3
	y = 3
	relative_position_id = CUB_puppet_begin
	cost = 7

	available = {
		has_government = authoritarian_democrat
	}

	prerequisite = {
		focus = CUB_auth_continue_2
	}
	prerequisite = {
		focus = CUB_auth_continue_3
	}
	bypass = {
		NOT = {
			country_exists = USA
		}
	}

	ai_will_do = {
		factor = 15
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_auth_continue_6"
		add_war_support = 0.1
	}
	search_filters = { FOCUS_FILTER_WAR_SUPPORT }
}

shared_focus = {
	id = CUB_auth_continue_7
	icon = GFX_goal_Centralised_Government
	x = -5
	y = 4
	relative_position_id = CUB_puppet_begin
	cost = 6

	available = {
		has_government = authoritarian_democrat
	}

	prerequisite = {
		focus = CUB_auth_continue_4
	}
	prerequisite = {
		focus = CUB_auth_continue_5
	}
	prerequisite = {
		focus = CUB_auth_continue_6
	}

	ai_will_do = {
		factor = 15
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_auth_continue_7"
		add_stability = 0.1
	}
	search_filters = { FOCUS_FILTER_STABILITY }
}

shared_focus = {
	id = CUB_auth_continue_8
	icon = GFX_goal_authoritarian
	x = -5
	y = 5
	relative_position_id = CUB_puppet_begin
	cost = 7

	available = {
		has_government = authoritarian_democrat
	}

	prerequisite = {
		focus = CUB_auth_continue_7
	}

	ai_will_do = {
		factor = 15
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_auth_continue_8"
		if = {
			limit = {
				has_idea =  CUB_american_puppet_idea_2
			}
			swap_ideas = {
				remove_idea = CUB_american_puppet_idea_2
				add_idea = CUB_american_puppet_idea_3
			}
		}
		if = {
			limit = {
				has_idea =  CUB_american_loyal_idea_2
			}
			swap_ideas = {
				remove_idea = CUB_american_loyal_idea_2
				add_idea = CUB_american_loyal_idea_3
			}
		}
		if = {
			limit = {
				NOT = {
					has_idea =  CUB_american_puppet_idea_2
					has_idea =  CUB_american_loyal_idea_2
				}
			}
			add_political_power = 50
			add_stability = 0.05
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_ANNEXATION FOCUS_FILTER_INDUSTRY FOCUS_FILTER_STABILITY }
}

shared_focus = {
	id = CUB_democratize_auth
	icon = GFX_goal_support_democracy
	x = 0
	y = 1
	relative_position_id = CUB_puppet_begin
	cost = 6

	available = {
		custom_trigger_tooltip = {
			always = no
			tooltip = bypass9_tooltip
		}
	}

	prerequisite = {
		focus = CUB_puppet_begin
	}
	mutually_exclusive = {
		focus = CUB_auth_continue
		focus = CUB_nomorelapdop
	}

	ai_will_do = {
		factor = 15
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_democratize_auth"
		custom_effect_tooltip = cubanoeffect_tooltip
	}
}

shared_focus = {
	id = CUB_democratize_auth_2
	icon = GFX_goal_tripartite_pact
	x = -2
	y = 2
	relative_position_id = CUB_puppet_begin
	cost = 5

	available = {
		has_government = market_liberal
	}

	prerequisite = {
		focus = CUB_democratize_auth
	}
	bypass = {
		NOT = {
			country_exists = USA
		}
	}

	ai_will_do = {
		factor = 15
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_democratize_auth_2"
		add_political_power = 30
		add_stability = 0.04
		add_popularity = {
			ideology = market_liberal
			popularity = 0.05
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY }
}

shared_focus = {
	id = CUB_democratize_auth_3
	icon = GFX_goal_bag_of_money
	x = 0
	y = 2
	relative_position_id = CUB_puppet_begin
	cost = 9

	available = {
		OR = {
			has_government = social_liberal
			has_government = market_liberal
			has_government = authoritarian_democrat
		}
	}

	prerequisite = {
		focus = CUB_democratize_auth
	}
	bypass = {
		NOT = {
			country_exists = USA
		}
	}

	ai_will_do = {
		factor = 15
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_democratize_auth_3"
		if = {
			limit = {
				has_idea =  CUB_american_puppet_idea
			}
			swap_ideas = {
				remove_idea = CUB_american_puppet_idea
				add_idea = CUB_american_puppet_idea_4
			}
		}
		else = {
			swap_ideas = {
				remove_idea = CUB_american_loyal_idea
				add_idea = CUB_american_loyal_idea_4
			}
		}
	}
	search_filters = { FOCUS_FILTER_ANNEXATION FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = CUB_democratize_auth_4
	icon = GFX_goal_DOM_The_Trial
	x = 2
	y = 2
	relative_position_id = CUB_puppet_begin
	cost = 3

	available = {
		OR = {
			has_government = social_liberal
			has_government = market_liberal
			has_government = authoritarian_democrat
		}
	}

	prerequisite = {
		focus = CUB_democratize_auth
	}
	ai_will_do = {
		factor = 15
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_democratize_auth_4"
		add_timed_idea = {
			idea = CUB_token_pros
			days = 90
		}
	}
}

shared_focus = {
	id = CUB_democratize_auth_5
	icon = GFX_goal_generic_improve_relations
	x = -1
	y = 3
	relative_position_id = CUB_puppet_begin
	cost = 4

	available = {
		OR = {
			has_government = social_liberal
			has_government = market_liberal
			has_government = authoritarian_democrat
		}
	}

	prerequisite = {
		focus = CUB_democratize_auth_2
	}
	prerequisite = {
		focus = CUB_democratize_auth_3
	}
	prerequisite = {
		focus = CUB_democratize_auth_4
	}
	ai_will_do = {
		factor = 15
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_democratize_auth_5"
		add_political_power = 25
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.05
		}
		add_popularity = {
			ideology = market_liberal
			popularity = 0.05
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.05
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CUB_democratize_auth_6
	icon = GFX_goal_DOM_End_Judicial_Corruption
	x = 1
	y = 3
	relative_position_id = CUB_puppet_begin
	cost = 10

	available = {
		OR = {
			has_government = social_liberal
			has_government = market_liberal
			has_government = authoritarian_democrat
		}
	}

	prerequisite = {
		focus = CUB_democratize_auth_2
	}
	prerequisite = {
		focus = CUB_democratize_auth_3
	}
	prerequisite = {
		focus = CUB_democratize_auth_4
	}
	ai_will_do = {
		factor = 15
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_democratize_auth_6"
		add_political_power = 50
		add_ideas = CUB_profadmin
	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = CUB_democratize_auth_7
	icon = GFX_DAH_Topke
	x = 0
	y = 4
	relative_position_id = CUB_puppet_begin
	cost = 8

	available = {
		OR = {
			has_government = social_liberal
			has_government = market_liberal
			has_government = authoritarian_democrat
		}
	}

	prerequisite = {
		focus = CUB_democratize_auth_5
	}
	prerequisite = {
		focus = CUB_democratize_auth_6
	}
	ai_will_do = {
		factor = 15
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_democratize_auth_7"
		country_event = cuba.208
		set_country_flag = cubconconstscore
		set_country_flag = cubradconstscore
	}
}

shared_focus = {
	id = CUB_democratize_auth_8
	icon = GFX_goal_volunteer_alliance
	x = 0
	y = 5
	relative_position_id = CUB_puppet_begin
	cost = 3

	available = {
		OR = {
			has_government = social_liberal
			has_government = market_liberal
			has_government = authoritarian_democrat
		}
	}

	prerequisite = {
		focus = CUB_democratize_auth_7
	}
	ai_will_do = {
		factor = 15
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_democratize_auth_8"
		add_war_support = 0.05
		hidden_effect = {
			CUB_allow_vanilla_elections_marlib = yes
		}
		custom_effect_tooltip = CUBelectionsallowed
	}
	search_filters = { FOCUS_FILTER_WAR_SUPPORT }
}

shared_focus = {
	id = CUB_nomorelapdop
	icon = GFX_goal_liberty
	x = 5
	y = 1
	relative_position_id = CUB_puppet_begin
	cost = 1

	available = {
		custom_trigger_tooltip = {
			always = no
			tooltip = bypass9_tooltip
		}
	}

	prerequisite = {
		focus = CUB_puppet_begin
	}
	mutually_exclusive = {
		focus = CUB_auth_continue
		focus = CUB_democratize_auth
	}

	ai_will_do = {
		factor = 15
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_nomorelapdop"
		custom_effect_tooltip = cubanoeffect_tooltip
	}
}

shared_focus = {
	id = CUB_nomorelapdop_2
	icon = GFX_goal_gold_reserve
	x = 4
	y = 2
	relative_position_id = CUB_puppet_begin
	cost = 9

	available = {
		OR = {
			has_government = social_liberal
			has_government = market_liberal
			has_government = authoritarian_democrat
		}
	}

	prerequisite = {
		focus = CUB_nomorelapdop
	}

	ai_will_do = {
		factor = 15
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_nomorelapdop_2"
		add_ideas = CUB_pupind1_idea
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = CUB_nomorelapdop_3
	icon = GFX_goal_HOL_sustain_neutrality
	x = 6
	y = 2
	relative_position_id = CUB_puppet_begin
	cost = 6

	available = {
		OR = {
			has_government = social_liberal
			has_government = market_liberal
			has_government = authoritarian_democrat
		}
	}

	prerequisite = {
		focus = CUB_nomorelapdop
	}

	ai_will_do = {
		factor = 15
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_nomorelapdop_3"
		add_war_support = 0.05
		add_popularity = {
			ideology = social_liberal
			popularity = 0.05
		}
	}
	search_filters = { FOCUS_FILTER_WAR_SUPPORT }
}

shared_focus = {
	id = CUB_nomorelapdop_4
	icon = GFX_goal_card_tricks
	x = 3
	y = 3
	relative_position_id = CUB_puppet_begin
	cost = 3

	available = {
		OR = {
			has_government = social_liberal
			has_government = market_liberal
			has_government = authoritarian_democrat
		}
	}

	prerequisite = {
		focus = CUB_nomorelapdop_2
	}
	prerequisite = {
		focus = CUB_nomorelapdop_3
	}

	ai_will_do = {
		factor = 15
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_nomorelapdop_4"
		swap_ideas = {
			remove_idea = CUB_pupind1_idea
			add_idea = CUB_pupind2_idea
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = CUB_nomorelapdop_5
	icon = GFX_goal_AST_freedom_of_the_press
	x = 5
	y = 3
	relative_position_id = CUB_puppet_begin
	cost = 3

	available = {
		OR = {
			has_government = social_liberal
			has_government = market_liberal
			has_government = authoritarian_democrat
		}
	}

	prerequisite = {
		focus = CUB_nomorelapdop_2
	}
	prerequisite = {
		focus = CUB_nomorelapdop_3
	}

	ai_will_do = {
		factor = 15
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_nomorelapdop_5"
		add_popularity = {
			ideology = social_democrat
			popularity = 0.03
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.03
		}
		add_popularity = {
			ideology = market_liberal
			popularity = 0.03
		}
		add_political_power = 50
		add_stability = -0.03
		add_war_support = -0.03
	}
	search_filters = { FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY }
}

shared_focus = {
	id = CUB_nomorelapdop_6
	icon = GFX_goal_COS_Ferrer_Coup
	x = 7
	y = 3
	relative_position_id = CUB_puppet_begin
	cost = 10

	available = {
		OR = {
			has_government = social_liberal
			has_government = market_liberal
			has_government = authoritarian_democrat
		}
	}

	prerequisite = {
		focus = CUB_nomorelapdop_2
	}
	prerequisite = {
		focus = CUB_nomorelapdop_3
	}

	ai_will_do = {
		factor = 15
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_nomorelapdop_6"
		add_stability = 0.05
		add_popularity = {
			ideology = totalist
			popularity = -0.05
		}
		add_popularity = {
			ideology = syndicalist
			popularity = -0.05
		}
		add_popularity = {
			ideology = radical_socialist
			popularity = -0.05
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = -0.05
		}
		add_popularity = {
			ideology = paternal_autocrat
			popularity = -0.05
		}
		add_popularity = {
			ideology = national_populist
			popularity = -0.05
		}
	}
	search_filters = { FOCUS_FILTER_STABILITY }
}

shared_focus = {
	id = CUB_nomorelapdop_7
	icon = GFX_goal_DEI_focus_disband_volksraad
	x = 5
	y = 4
	relative_position_id = CUB_puppet_begin
	cost = 3

	available = {
		OR = {
			has_government = social_liberal
			has_government = market_liberal
			has_government = authoritarian_democrat
		}
	}

	prerequisite = {
		focus = CUB_nomorelapdop_4
	}
	prerequisite = {
		focus = CUB_nomorelapdop_5
	}
	prerequisite = {
		focus = CUB_nomorelapdop_6
	}

	ai_will_do = {
		factor = 15
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_nomorelapdop_7"
		add_popularity = {
			ideology = social_liberal
			popularity = 0.05
		}
		hidden_effect = {
			CUB_allow_vanilla_elections_soclib = yes
		}
		custom_effect_tooltip = CUBelectionsallowed
	}
}

shared_focus = {
	id = CUB_nomorelapdop_8
	icon = GFX_goal_cuba
	x = 5
	y = 5
	relative_position_id = CUB_puppet_begin
	cost = 10

	available = {
		OR = {
			has_government = social_liberal
			has_government = market_liberal
			has_government = authoritarian_democrat
		}
	}

	prerequisite = {
		focus = CUB_nomorelapdop_7
	}

	ai_will_do = {
		factor = 15
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CUB_nomorelapdop_8"
		add_political_power = 150
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}
