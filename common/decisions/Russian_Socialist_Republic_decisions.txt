################################
## Socialist Russia Decisions ##
## By Alpinia                 ##
################################

RUS_Industrial_Expansion_decisions = {
	SOV_The_First_Five_Year_Plan = {
		icon = eng_trade_unions_demand
		
		allowed = { always = no } #manually activated
		
		available = {
			num_of_factories > 100
			has_completed_focus = SOV_Khozraschyot
			has_completed_focus = SOV_Mechanisation
			has_completed_focus = SOV_Ural_Tractor_Plants
			has_completed_focus = SOV_Research_Investments
			has_completed_focus = SOV_Transsiberian_Expansion
			has_completed_focus = SOV_Resource_Prospection
		}
		
		selectable_mission = yes
		days_mission_timeout = 1825
		
		ai_will_do = { factor = 1000 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SOV_The_First_Five_Year_Plan"
			add_political_power = 100
			add_stability = 0.10
			add_war_support = 0.2
		}

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout SOV_The_First_Five_Year_Plan"
			add_political_power = -100
			add_stability = -0.10
			add_war_support = -0.2
		}
	}
}

SOV_Spreading_The_Revolution_decisions = {
	SOV_Join_The_Internationale = {
		icon = generic_form_nation

		visible = {
			is_in_faction = no
			is_subject = no
			has_socialist_government = yes
			FROM = {
				is_faction_leader = yes
				has_socialist_government = yes
				NOT = { has_war_with = ROOT }
			}
		}

		targets = { ENG FRA CSA }
		target_root_trigger = {
			has_completed_focus = SOV_Spreading_The_Revolution
		}
		target_trigger = {
			FROM = {
				is_faction_leader = yes
				has_socialist_government = yes
				NOT = { has_war_with = ROOT }
			}
		}

		cost = freedec?0
		fire_only_once = yes

		ai_will_do = {
			factor = 100
		}
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SOV_Join_The_Internationale target: [From.GetName]"
			FROM = { country_event = russoc.100 }
		}
	}
	SOV_Invade_Central_Asia = {
		name = RUS_Attack_Region
		icon = hol_draw_up_staff_plans

		available = {
			is_neighbor_of = FROM
		}

		visible = {
			can_declare_war_on = FROM
		}

		targets = { ALO TRK }
		target_root_trigger = {
			has_completed_focus = SOV_Secure_Central_Asia
		}
		target_trigger = {
			can_declare_war_on = FROM
		}

		cost = 10
		days_remove = 14
		fire_only_once = yes
		war_with_target_on_remove = yes

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				strength_ratio = {
					tag = FROM
					ratio < 0.8
				}
			}
			modifier = {
				factor = 0
				FROM = {
					any_allied_country = {
						is_faction_leader = yes
						overlord = {
							strength_ratio = {
								tag = ROOT
								ratio > 0.7
							}
						}
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					is_subject = yes
					overlord = {
						strength_ratio = {
							tag = ROOT
							ratio > 0.7
						}
					}
				}
			}
			modifier = {
				factor = 0
				has_country_flag = imminent_war
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SOV_Invade_Central_Asia target: [From.GetName]"
			set_country_flag = { flag = imminent_war days = 20 value = 1 }
			FROM = {
				add_ai_strategy = {
					type = prepare_for_war
					id = ROOT
					value = 1000
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SOV_Invade_Central_Asia target: [From.GetName]"
			FROM = {
				add_ai_strategy = {
					type = prepare_for_war
					id = ROOT
					value = -1000
				}
			}
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}
	SOV_Invade_Caucasus = {
		name = RUS_Attack_Region
		icon = hol_draw_up_staff_plans

		available = {
			is_neighbor_of = FROM
			FROM = {
				NOT = { is_in_faction_with = GER }
			}
		}

		visible = {
			can_declare_war_on = FROM
		}

		targets = { DKB GEO ARM AZE }
		target_root_trigger = {
			has_completed_focus = SOV_Into_The_Caucasus
		}
		target_trigger = {
			can_declare_war_on = FROM
		}

		cost = 10
		days_remove = 14
		fire_only_once = yes
		war_with_target_on_remove = yes

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				strength_ratio = {
					tag = FROM
					ratio < 0.8
				}
			}
			modifier = {
				factor = 0
				FROM = {
					any_allied_country = {
						is_faction_leader = yes
						overlord = {
							strength_ratio = {
								tag = ROOT
								ratio > 0.7
							}
						}
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					is_subject = yes
					overlord = {
						strength_ratio = {
							tag = ROOT
							ratio > 0.7
						}
					}
				}
			}
			modifier = {
				factor = 0
				has_country_flag = imminent_war
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SOV_Invade_Caucasus target: [From.GetName]"
			set_country_flag = { flag = imminent_war days = 20 value = 1 }
			FROM = {
				add_ai_strategy = {
					type = prepare_for_war
					id = ROOT
					value = 1000
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SOV_Invade_Caucasus target: [From.GetName]"
			FROM = {
				add_ai_strategy = {
					type = prepare_for_war
					id = ROOT
					value = -1000
				}
			}
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}
	SOV_Invade_Far_East = {
		name = RUS_Attack_Region
		icon = hol_draw_up_staff_plans

		available = {
			if = {
				limit = {
					FROM = {
						NOT = { tag = JAP }
					}
				}
				is_neighbor_of = FROM
				FROM = {
					NOT = { is_in_faction_with = JAP }
				}
			}
		}

		visible = {
			can_declare_war_on = FROM
		}

		targets = { MON TRM JAP }
		target_root_trigger = {
			has_completed_focus = SOV_Enemy_In_The_East
		}
		target_trigger = {
			can_declare_war_on = FROM
		}

		cost = 10
		days_remove = 14
		fire_only_once = yes
		war_with_target_on_remove = yes

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				any_allied_country = {
					is_faction_leader = yes
					has_war = yes
				}
			}
			modifier = {
				factor = 0
				strength_ratio = {
					tag = FROM
					ratio < 0.8
				}
			}
			modifier = {
				factor = 0
				FROM = {
					any_allied_country = {
						is_faction_leader = yes
						overlord = {
							strength_ratio = {
								tag = ROOT
								ratio > 0.7
							}
						}
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					is_subject = yes
					overlord = {
						strength_ratio = {
							tag = ROOT
							ratio > 0.7
						}
					}
				}
			}
			modifier = {
				factor = 0
				has_country_flag = imminent_war
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SOV_Invade_Far_East target: [From.GetName]"
			set_country_flag = { flag = imminent_war days = 20 value = 1 }
			FROM = {
				add_ai_strategy = {
					type = prepare_for_war
					id = ROOT
					value = 1000
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SOV_Invade_Far_East target: [From.GetName]"
			FROM = {
				add_ai_strategy = {
					type = prepare_for_war
					id = ROOT
					value = -1000
				}
			}
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}
	SOV_Invade_Middle_East = {
		name = RUS_Attack_Region
		icon = hol_draw_up_staff_plans

		available = {
			is_neighbor_of = FROM
		}

		visible = {
			can_declare_war_on = FROM
		}

		targets = { TUR OTT PER }
		target_root_trigger = {
			has_completed_focus = SOV_Force_Open_The_Straits
		}
		target_trigger = {
			can_declare_war_on = FROM
		}

		cost = 10
		days_remove = 14
		fire_only_once = yes
		war_with_target_on_remove = yes

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				strength_ratio = {
					tag = FROM
					ratio < 0.8
				}
			}
			modifier = {
				factor = 0
				FROM = {
					any_allied_country = {
						is_faction_leader = yes
						overlord = {
							strength_ratio = {
								tag = ROOT
								ratio > 0.7
							}
						}
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					is_subject = yes
					overlord = {
						strength_ratio = {
							tag = ROOT
							ratio > 0.7
						}
					}
				}
			}
			modifier = {
				factor = 0
				has_country_flag = imminent_war
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SOV_Invade_Middle_East target: [From.GetName]"
			set_country_flag = { flag = imminent_war days = 20 value = 1 }
			FROM = {
				add_ai_strategy = {
					type = prepare_for_war
					id = ROOT
					value = 1000
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SOV_Invade_Middle_East target: [From.GetName]"
			FROM = {
				add_ai_strategy = {
					type = prepare_for_war
					id = ROOT
					value = -1000
				}
			}
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}
	SOV_Attack_Eastern_Europe = {
		name = RUS_Attack_Region
		icon = hol_draw_up_staff_plans

		available = {
			is_neighbor_of = FROM
			OR = {
				has_war_with = GER
				NOT = { country_exists = GER }
			}
		}

		visible = {
			can_declare_war_on = FROM
			FROM = {
				is_in_faction = no
			}
		}

		targets = { EST LAT LIT WHR UKR FIN }
		target_root_trigger = {
			has_completed_focus = SOV_The_Final_Battle
		}
		target_trigger = {
			can_declare_war_on = FROM
			FROM = {
				is_in_faction = no
			}
		}

		cost = 10
		days_remove = 14
		fire_only_once = yes
		war_with_target_on_remove = yes

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				strength_ratio = {
					tag = FROM
					ratio < 0.8
				}
			}
			modifier = {
				factor = 0
				FROM = {
					is_subject = yes
					overlord = {
						strength_ratio = {
							tag = ROOT
							ratio > 0.7
						}
					}
				}
			}
			modifier = {
				factor = 0
				has_country_flag = imminent_war
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SOV_Attack_Eastern_Europe target: [From.GetName]"
			set_country_flag = { flag = imminent_war days = 20 value = 1 }
			FROM = {
				add_ai_strategy = {
					type = prepare_for_war
					id = ROOT
					value = 1000
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SOV_Attack_Eastern_Europe target: [From.GetName]"
			FROM = {
				add_ai_strategy = {
					type = prepare_for_war
					id = ROOT
					value = -1000
				}
			}
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}
	SOV_The_Final_Battle_decision = {
		name = SOV_The_Final_Battle
		priority = 150
		icon = eng_puppet_usa

		visible = {
			can_declare_war_on = FROM
		}

		targets = { GER }
		target_root_trigger = {
			has_completed_focus = SOV_The_Final_Battle
		}
		target_trigger = {
			can_declare_war_on = FROM
		}

		cost = freedec?0
		days_remove = 40
		fire_only_once = yes
		war_with_target_on_remove = yes

		ai_will_do = {
			factor = 1000
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				any_allied_country = {
					is_faction_leader = yes
					has_war = yes
				}
			}
			modifier = {
				factor = 0
				strength_ratio = {
					tag = FROM
					ratio < 0.6
				}
			}
			modifier = {
				factor = 0
				has_country_flag = imminent_war
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SOV_The_Final_Battle_decision target: [From.GetName]"
			set_country_flag = { flag = imminent_war days = 45 value = 1 }
			for_each_scope_loop = {
				array = FROM.faction_members
				if = {
					limit = {
						OR = {
							is_in_europe = yes
							tag = DKB
							tag = GEO
							tag = AZE
						}
						is_in_faction_with = GER
						ROOT = {
							can_declare_war_on = PREV
							is_neighbor_of = PREV
						}
					}
					add_ai_strategy = {
						type = prepare_for_war
						id = ROOT
						value = 1000
					}
					ROOT = {
						set_country_flag = RUS_prepare_for_war_@PREV
						add_ai_strategy = {
							type = prepare_for_war
							id = PREV
							value = 1000
						}
					}
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SOV_The_Final_Battle_decision target: [From.GetName]"
			effect_tooltip = {
				every_other_country = {
					limit = {
						OR = {
							is_in_europe = yes
							tag = DKB
							tag = GEO
							tag = AZE
						}
						is_in_faction_with = GER
						ROOT = {
							can_declare_war_on = PREV
							is_neighbor_of = PREV
						}
					}
					ROOT = {
						declare_war_on = {
							target = PREV
							type = annex_everything
						}
					}
				}
			}
			every_other_country = {
				limit = {
					ROOT = { has_country_flag = RUS_prepare_for_war_@PREV }
				}
				add_ai_strategy = {
					type = prepare_for_war
					id = ROOT
					value = -1000
				}
				ROOT = {
					clr_country_flag = RUS_prepare_for_war_@PREV
					add_ai_strategy = {
						type = prepare_for_war
						id = PREV
						value = -1000
					}
					declare_war_on = {
						target = PREV
						type = annex_everything
					}
				}
			}
		}
	}
}
