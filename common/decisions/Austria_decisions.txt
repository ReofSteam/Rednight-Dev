###########################
# Austria Decisions
###########################
# By ~mw~
###########################

political_actions = {

	AUS_syndie_threat = {
		icon = generic_prepare_civil_war

		allowed = {
			tag = AUS
		}
		available = {
			has_completed_focus = AUS_protector_of_the_balkans
			OR = {
				custom_trigger_tooltip = {
					tooltip = AUS_germany_on_the_ropes
					OR = {
					# France is invading Bavaria and Germany is losing
						AND = {
							GER = { surrender_progress > 0.20 }
							OR = {
								50 = { controller = { is_in_faction_with = FRA } }
								780 = { controller = { is_in_faction_with = FRA } }
							}
						}
						# France has occupied Upper Bavaria
						52 = { controller = { is_in_faction_with = FRA } }
					}
				}
				custom_trigger_tooltip = {
					tooltip = AUS_syndicalism_winning_Italy
					count_triggers = {
						amount = 4
						158 = { controller = { is_in_faction_with = FRA } } #Piedmont
						159 = { controller = { is_in_faction_with = FRA } } #Lombardy
						160 = { controller = { is_in_faction_with = FRA } } #Venice
						162 = { controller = { is_in_faction_with = FRA } } #Tuscany
						2 = { controller = { is_in_faction_with = FRA } } #Rome
						117 = { controller = { is_in_faction_with = FRA } } #Naples
						115 = { controller = { is_in_faction_with = FRA } } #Sicily
					}
				}
			}
		}
		visible = {
			is_subject = no
			is_faction_leader = yes
			not_has_socialist_government = yes
			can_declare_war_on = FRA
			FRA = {
				has_socialist_government = yes
				has_war_with = GER
			}
		}

		cost = freedec?0
		fire_only_once = yes

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				# Germany isn't on the ropes
				NOT = {
					AND = {
						GER = { surrender_progress > 0.20 }
						OR = {
							50 = { controller = { is_in_faction_with = FRA } }
							780 = { controller = { is_in_faction_with = FRA } }
						}
					}
					52 = { controller = { is_in_faction_with = FRA } }
				}
				# ITA still exists and is an ally
				ITA = {
					exists = yes
					OR = {
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
				}
			}
			modifier = {
				factor = 0
				has_war = yes
				OR = {
					has_war_with = HUN
					any_enemy_country = { is_actual_major = yes }
					surrender_progress > 0.01
					HUN = {
						is_subject_of = AUS
						surrender_progress > 0.05
					}
					CZE = {
						is_subject_of = AUS
						surrender_progress > 0.15
					}
					CRO = {
						is_subject_of = AUS
						surrender_progress > 0.15
					}
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision AUS_syndie_threat"
			GER = { country_event = aus.tree.4011 }
		}
	}
}

AUS_elections_decisions = {
	AUS_endorse_CS = {
		icon = GFX_decision_generic_political_discourse

		available = {
			has_idea = AUS_elections
			NOT = {
				has_country_flag = endorsing_a_party
			}
		}

		visible = {
			has_idea = AUS_elections
		}

		cancel_trigger = {
			NOT = {
				has_idea = AUS_elections
			}
		}

		modifier = {
			social_conservative_drift = 0.05
			political_power_cost = 0.1
		}

		days_remove = 60
		days_re_enable = 300

		cost = 20

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision AUS_endorse_CS"
			set_country_flag = endorsing_a_party
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove AUS_endorse_CS"
			clr_country_flag = endorsing_a_party
		}

		ai_will_do = {
			base = 0
		}
	}
	AUS_endorse_SDAP = {
		icon = GFX_decision_generic_political_discourse

		available = {
			has_idea = AUS_elections
			NOT = {
				has_country_flag = endorsing_a_party
			}
		}

		visible = {
			has_idea = AUS_elections
		}

		cancel_trigger = {
			NOT = {
				has_idea = AUS_elections
			}
		}

		modifier = {
			social_democrat_drift = 0.05
			political_power_cost = 0.1
		}

		days_remove = 60
		days_re_enable = 300

		cost = 20

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision AUS_endorse_SDAP"
			set_country_flag = endorsing_a_party
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove AUS_endorse_SDAP"
			clr_country_flag = endorsing_a_party
		}

		ai_will_do = {
			base = 0
		}
	}
}

