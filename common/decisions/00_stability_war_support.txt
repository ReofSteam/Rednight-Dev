crisis = {

	draft_dodging = {
		icon = generic_civil_support

		allowed = {
			always = yes
		}

		available = {
			NOT = { has_country_flag = crisis_solution_in_progress }
			if = {
				limit = { has_idea = draft_dodging_3 }
				has_idea = draft_dodging_3
			}
			else_if = {
				limit = { has_idea = draft_dodging_2 }
				has_idea = draft_dodging_2
			}
			else = {
				has_idea = draft_dodging
			}
		}

		visible = {
			OR = {
				has_idea = draft_dodging
				has_idea = draft_dodging_2
				has_idea = draft_dodging_3
			}
		}

		cost = freedec?0
		ai_will_do = {
			factor = 10
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision draft_dodging"
			country_event = stability.21
		}
	}

	strikes_1 = {
		icon = generic_civil_support

		allowed = {
			always = yes
		}

		available = {
			NOT = { has_country_flag = crisis_solution_in_progress }
			if = {
				limit = { has_idea = strikes_3 }
				has_idea = strikes_3
			}
			else_if = {
				limit = { has_idea = strikes_2 }
				has_idea = strikes_2
			}
			else = {
				has_idea = strikes_1
			}
		}

		visible = {
			OR = {
				has_idea = strikes_1
				has_idea = strikes_2
				has_idea = strikes_3
			}
		}

		cost = freedec?0
		ai_will_do = {
			factor = 10
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision strikes_1"
			country_event = stability.22
		}
	}

	mutiny_1 = {
		icon = generic_civil_support

		allowed = {
			always = yes
		}

		available = {
			NOT = { has_country_flag = crisis_solution_in_progress }
			if = {
				limit = { has_idea = mutiny_3 }
				has_idea = mutiny_3
			}
			else_if = {
				limit = { has_idea = mutiny_2 }
				has_idea = mutiny_2
			}
			else = {
				has_idea = mutiny_1
			}
		}

		visible = {
			OR = {
				has_idea = mutiny_1
				has_idea = mutiny_2
				has_idea = mutiny_3
			}
		}

		cost = freedec?0
		ai_will_do = {
			factor = 10
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision mutiny_1"
			country_event = stability.23
		}
	}

	draft_dodging_mission = {
		icon = generic_civil_support

		available = {
			NOT = {
				has_idea = draft_dodging
				has_idea = draft_dodging_2
				has_idea = draft_dodging_3
			}
		}

		days_mission_timeout = 90

		activation = {
			OR = {
				has_idea = draft_dodging
				has_idea = draft_dodging_2
				has_idea = draft_dodging_3
			}
		}
		visible = {
			OR = {
				has_idea = draft_dodging
				has_idea = draft_dodging_2
				has_idea = draft_dodging_3
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision draft_dodging_mission"

		}
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout draft_dodging_mission"
			if = {
				limit = { has_idea = draft_dodging_3 }
				random_list = {
					20 = {
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 90 }
						}
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 180 }
						}
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 270 }
						}
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 365 }
						}
						swap_ideas = {
							remove_idea = draft_dodging_3
							add_idea = draft_dodging_2
						}
					}
					80 = {
						modifier = {
							factor = 0
							has_stability < 0.25
						}
						modifier = {
							factor = 0.5
							has_country_flag = { flag = crisis_in_progress days > 365 }
						}
						add_stability = -0.05
					}
				}
			}
			else_if = {
				limit = { has_idea = draft_dodging_2 }
				random_list = {
					20 = {
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 90 }
						}
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 180 }
						}
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 270 }
						}
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 365 }
						}
						swap_ideas = {
							remove_idea = draft_dodging_2
							add_idea = draft_dodging
						}
					}
					80 = {
						modifier = {
							factor = 0.5
							has_country_flag = { flag = crisis_in_progress days > 365 }
						}
						swap_ideas = {
							remove_idea = draft_dodging_2
							add_idea = draft_dodging_3
						}
					}
				}
			}
			else_if = {
				limit = { has_idea = draft_dodging }
				random_list = {
					20 = {
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 90 }
						}
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 180 }
						}
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 270 }
						}
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 365 }
						}
						remove_ideas = draft_dodging
					}
					80 = {
						modifier = {
							factor = 0.5
							has_country_flag = { flag = crisis_in_progress days > 365 }
						}
						swap_ideas = {
							remove_idea = draft_dodging
							add_idea = draft_dodging_2
						}
					}
				}
			}
		}
	}

	strikes_mission = {
		icon = generic_civil_support
		available = {
			NOT = {
				OR = {
					has_idea = strikes_1
					has_idea = strikes_2
					has_idea = strikes_3
				}
			}
		}

		days_mission_timeout = 90

		activation = {
			OR = {
				has_idea = strikes_1
				has_idea = strikes_2
				has_idea = strikes_3
			}
		}
		visible = {
			OR = {
				has_idea = strikes_1
				has_idea = strikes_2
				has_idea = strikes_3
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision strikes_mission"

		}
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout strikes_mission"
			if = {
				limit = { has_idea = strikes_3 }
				random_list = {
					20 = {
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 90 }
						}
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 180 }
						}
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 270 }
						}
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 365 }
						}
						swap_ideas = {
							remove_idea = strikes_3
							add_idea = strikes_2
						}
					}
					80 = {
						modifier = {
							factor = 0
							has_stability < 0.25
						}
						modifier = {
							factor = 0.5
							has_country_flag = { flag = crisis_in_progress days > 365 }
						}
						add_stability = -0.05
					}
				}
			}
			else_if = {
				limit = { has_idea = strikes_2 }
				random_list = {
					20 = {
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 90 }
						}
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 180 }
						}
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 270 }
						}
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 365 }
						}
						swap_ideas = {
							remove_idea = strikes_2
							add_idea = strikes_1
						}
					}
					80 = {
						modifier = {
							factor = 0.5
							has_country_flag = { flag = crisis_in_progress days > 365 }
						}
						swap_ideas = {
							remove_idea = strikes_2
							add_idea = strikes_3
						}
					}
				}
			}
			else_if = {
				limit = { has_idea = strikes_1 }
				random_list = {
					20 = {
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 90 }
						}
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 180 }
						}
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 270 }
						}
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 365 }
						}
						remove_ideas = strikes_1
					}
					80 = {
						modifier = {
							factor = 0.5
							has_country_flag = { flag = crisis_in_progress days > 365 }
						}
						swap_ideas = {
							remove_idea = strikes_1
							add_idea = strikes_2
						}
					}
				}
			}
		}
	}

	mutiny_mission = {
		icon = generic_civil_support

		available = {
			NOT = {
				OR = {
					has_idea = mutiny_1
					has_idea = mutiny_2
					has_idea = mutiny_3
				}
			}
		}

		days_mission_timeout = 90

		activation = {
			OR = {
				has_idea = mutiny_1
				has_idea = mutiny_2
				has_idea = mutiny_3
			}
		}
		visible = {
			OR = {
				has_idea = mutiny_1
				has_idea = mutiny_2
				has_idea = mutiny_3
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision mutiny_mission"

		}
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout mutiny_mission"
			if = {
				limit = { has_idea = mutiny_3 }
				random_list = {
					20 = {
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 90 }
						}
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 180 }
						}
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 270 }
						}
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 365 }
						}
						swap_ideas = {
							remove_idea = mutiny_3
							add_idea = mutiny_2
						}
					}
					80 = {
						modifier = {
							factor = 0
							has_stability < 0.25
						}
						modifier = {
							factor = 0.5
							has_country_flag = { flag = crisis_in_progress days > 365 }
						}
						add_stability = -0.05
					}
				}
			}
			else_if = {
				limit = { has_idea = mutiny_2 }
				random_list = {
					20 = {
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 90 }
						}
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 180 }
						}
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 270 }
						}
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 365 }
						}
						swap_ideas = {
							remove_idea = mutiny_2
							add_idea = mutiny_1
						}
					}
					80 = {
						modifier = {
							factor = 0.5
							has_country_flag = { flag = crisis_in_progress days > 365 }
						}
						swap_ideas = {
							remove_idea = mutiny_2
							add_idea = mutiny_3
						}
					}
				}
			}
			else_if = {
				limit = { has_idea = mutiny_1 }
				random_list = {
					20 = {
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 90 }
						}
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 180 }
						}
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 270 }
						}
						modifier = {
							factor = 2
							has_country_flag = { flag = crisis_in_progress days > 365 }
						}
						remove_ideas = mutiny_1
					}
					80 = {
						modifier = {
							factor = 0.5
							has_country_flag = { flag = crisis_in_progress days > 365 }
						}
						swap_ideas = {
							remove_idea = mutiny_1
							add_idea = mutiny_2
						}
					}
				}
			}
		}
	}
}

demobilization = {
	demobilization_economic = {
		icon = generic_industry

		available = {
			has_war = no
			has_unsupported_economic_law = yes
		}

		visible = {
			has_war = no
			has_unsupported_economic_law = yes
		}

		cost = 50

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision demobilization_economic"
			if = {
				limit = { has_war_support < 0.15 }
				add_ideas = civilian_economy
			}
			else_if = {
				limit = { has_war_support < 0.25 }
				add_ideas = low_economic_mobilisation
			}
			else_if = {
				limit = { has_war_support < 0.5 }
				add_ideas = partial_economic_mobilisation
			}
			else_if = {
				limit = { has_war_support < 0.8 }
				add_ideas = war_economy
			}
			if = {
				limit = { has_idea = strikes_1 }
				remove_ideas = strikes_1
			}
			if = {
				limit = { has_idea = strikes_2 }
				remove_ideas = strikes_2
			}
			if = {
				limit = { has_idea = strikes_3 }
				remove_ideas = strikes_3
			}
		}
		ai_will_do = {
			factor = 500 #should really get on this
		}
	}

	demob_economic_mission = {
		icon = revolt
		available = {
			OR = {
				has_unsupported_economic_law = no
				has_war = yes
			}
		}

		activation = {
			has_unsupported_economic_law = yes
			has_war = no
		}

		is_good = no
		days_mission_timeout = 120

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision demob_economic_mission"
			if = {
				limit = { has_idea = strikes_1 }
				remove_ideas = strikes_1
			}
			if = {
				limit = { has_idea = strikes_2 }
				remove_ideas = strikes_2
			}
			if = {
				limit = { has_idea = strikes_3 }
				remove_ideas = strikes_3
			}
		}
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout demob_economic_mission"
			activate_mission = demob_economic_mission
			if = {
				limit = {
					has_idea = strikes_3
					has_stability > 0.25
				}
				add_stability = -0.05
			}
			if = {
				limit = { has_idea = strikes_2 }
				swap_ideas = {
					remove_idea = strikes_2
					add_idea = strikes_3
				}
			}
			if = {
				limit = { has_idea = strikes_1 }
				swap_ideas = {
					remove_idea = strikes_1
					add_idea = strikes_2
				}
			}
			if = {
				limit = {
					NOT = {
						has_idea = strikes_1
						has_idea = strikes_2
						has_idea = strikes_3
					}
				}
				add_ideas = strikes_1
			}
		}
	}

	demobilization_manpower = {
		icon = generic_prepare_civil_war

		allowed = {
			always = yes
		}
		available = {
			has_unsupported_manpower_law = yes
			has_war = no
		}
		visible = {
			has_unsupported_manpower_law = yes
			has_war = no
		}

		cost = freedec?0
		ai_will_do = {
			factor = 500
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision demobilization_manpower"
			if = {
				limit = { has_war_support < 0.1 }
				add_ideas = volunteer_only
			}
			else_if = {
				limit = { has_war_support < 0.2 }
				add_ideas = limited_conscription
			}
			else_if = {
				limit = { has_war_support < 0.6 }
				add_ideas = extensive_conscription
			}
			else = {
				add_ideas = service_by_requirement
			}
		}
	}

	demob_manpower_mission = {
		icon = revolt

		available = {
			OR = {
				has_unsupported_manpower_law = no
				has_war = yes
			}
		}
		activation = {
			has_unsupported_manpower_law = yes
			has_war = no
		}

		is_good = no
		days_mission_timeout = 120

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout demob_manpower_mission"
			if = {
				limit = { has_stability > 0.25 }
				add_stability = -0.05
			}
		}
	}
}

