###########################
# GEA Decisions
###########################
# By Vietcongtraps and Roparex
###########################
GEA_indochina_war_decisions = {

	GEA_start_naval_blockade = {
		icon = generic_naval
		allowed = {
			original_tag = GEA
		}
		visible = {
			INC = { has_idea = INC_internationale_support }
		}

		cost = freedec?0

		fire_only_once = yes

		ai_will_do = {
			factor = 100
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GEA_start_naval_blockade"
			INC = { country_event = { id = viet.5 days = 3 } }
		}
	}

	GEA_shelling_on_Saigon = {
		icon = generic_naval
		allowed = {
			original_tag = GEA
		}

		cost = freedec?0

		fire_only_once = yes

		ai_will_do = {
			factor = 100
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GEA_shelling_on_Saigon"
			add_war_support = 0.03
			INC = { country_event = viet.80 }
		}
	}

	GEA_suppress_Tonkin = {
		icon = generic_ignite_civil_war
		allowed = {
			original_tag = GEA
		}
		available = {
			divisions_in_state = { state = 671 size > 2 }
		}
		visible = {
			check_variable = { INC.guerilla_activity > 10 }
		}

		highlight_states = {
			state = 671
		}

		cost = 10

		ai_will_do = {
			factor = 0
			modifier = {
				add = 200
				divisions_in_state = {
					state = 671
					size > 2
				}
			}
		}

		days_re_enable = 120
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GEA_suppress_Tonkin"
			activate_mission = GEA_maintain_Tonkin_control
		}
	}

	GEA_maintain_Tonkin_control = {

		icon = generic_civil_support

		available = {
			always = no
		}

		days_mission_timeout = 120

		activation = {
			always = no #Triggered from effect
		}

		cancel_trigger = {
			divisions_in_state = { state = 671 size < 3 }
		}

		highlight_states = {
			state = 671
		}
		cancel_trigger = {
			NOT = { has_war_with = INC }
		}

		is_good = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GEA_maintain_Tonkin_control"
		}

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout GEA_maintain_Tonkin_control"
			custom_effect_tooltip = reduce_10_guerilla_tooltip
			add_to_variable = { var = INC.guerilla_activity value = -10 }
		}
	}

	GEA_reinforce_police = {
		icon = oppression
		available = {
			has_equipment = { infantry_equipment > 250 }
		}

		cost = 25
		days_remove = 75
		days_re_enable = 50
		modifier = {
			political_power_gain = -0.25
		}
		visible = {
			INC = { check_variable = { guerilla_activity > 10 } }
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GEA_reinforce_police"
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = -250
			}
			add_manpower  = -1000
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove GEA_reinforce_police"
			custom_effect_tooltip = reduce_10_guerilla_tooltip
			add_to_variable = { var = INC.guerilla_activity value = -10 }
		}
	}

	GEA_Zeppelin_decision = {
		allowed = {
			original_tag = GEA
		}
		days_remove = 35
		modifier = {
			political_power_gain = -0.5
			civilian_factory_use = 2
		}
		visible = {
			has_army_experience > 5
		}
		cost = 20

		fire_only_once = yes


		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GEA_Zeppelin_decision"
			add_manpower  = -500
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove GEA_Zeppelin_decision"
			add_equipment_to_stockpile = {
				type = transport_plane_equipment_1
				amount = 10
			}
			custom_effect_tooltip = reduce_10_guerilla_tooltip
			add_to_variable = { var = INC.guerilla_activity value = -10 }
		}
	}

	GEA_Fernspaher_decision = {
		allowed = {
			original_tag = GEA
		}
		available = {
			has_army_experience > 15
		}

		days_remove = 45
		modifier = {
			political_power_gain = -0.5
			command_power_gain = -0.25
		}
		visible = {
			has_army_experience > 10
		}
		cost = 20

		fire_only_once = yes


		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GEA_Fernspaher_decision"
			add_manpower  = -8000
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = -250
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove GEA_Fernspaher_decision"
			set_technology = {
				paratroopers = 1
			}

			division_template = {
				name = "Ostasiatische Fernspaher"
				priority = 2
				division_names_group = GEA_PAR_01
				regiments = {
					paratrooper = { x = 0 y = 0 }
					paratrooper = { x = 0 y = 1 }
					paratrooper = { x = 0 y = 2 }
					paratrooper = { x = 1 y = 0 }
					paratrooper = { x = 1 y = 1 }
					paratrooper = { x = 1 y = 2 }
				}
				support = {
					engineer = { x = 0 y = 0 }
					recon = { x = 0 y = 1 }
				}
			}
			random_owned_state = {
				prioritize =  { 336 }
				create_unit = {
					division = "name = \"FernspÃ¤hlehrbrigade 1'\" division_template = \"Ostasiatische Fernspaher\"  start_experience_factor = 0.8"
					owner = GEA
				}
			}
		}
	}
}
political_actions = {

	GEA_take_east_asian_navy = {
		icon = generic_naval
		allowed = {
			original_tag = GER
		}
		available = {
			original_tag = GER
			GER = {
				has_war = no
			}
			GEA = {
				is_subject_of = GER
				has_war = no
			}
		}
		visible = {
			original_tag = GER
			GEA = {
				is_subject_of = GER
				is_ai = yes
			}
		}
		cost = freedec?0
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GEA_take_east_asian_navy"
			GEA = {
				transfer_navy = {
					target = GER
				}
			}
			GER = {

				set_country_flag = GER_GEA_navy_transferred
			}
		}
		fire_only_once = yes
	}


	GEA_reintegrate_Cochinchina_decision = {
		allowed = {
			original_tag = GEA
		}
		available = {
			has_stability > 0.5
		}
		days_remove = 300
		modifier = {
			political_power_gain = -0.5
		}
		visible = {
			has_completed_focus = GEA_internal4
			NOT = { has_country_flag = GEA_collaboration }
			286 = { NOT = { is_core_of = GEA } }
			856 = { NOT = { is_core_of = GEA } }
			INC = { NOT = {  exists = yes } }
			owns_state = 286
			owns_state = 856
		}
		cost = 20

		fire_only_once = yes


		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GEA_reintegrate_Cochinchina_decision"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove GEA_reintegrate_Cochinchina_decision"
			add_state_core = 856
			add_state_core = 286
		}
	}

	GEA_German_vietnamese_reconciliation_decision = {
		allowed = {
			original_tag = GEA
		}
		available = {
			has_stability > 0.5
		}
		days_remove = 400
		modifier = {
			political_power_gain = -0.25
		}
		visible = {
			has_completed_focus = GEA_internal4
			has_country_flag = GEA_collaboration
			286 = { NOT = { is_core_of = GEA } }
			856 = { NOT = { is_core_of = GEA } }
			INC = { NOT = {  exists = yes  } }
			owns_state = 286
			owns_state = 856
		}
		cost = 30

		fire_only_once = yes


		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GEA_German_vietnamese_reconciliation_decision"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove GEA_German_vietnamese_reconciliation_decision"
			add_state_core = 856
			add_state_core = 286
		}
	}

}
GEA_naval_action_decisions = {
}

GEA_colonial_decisions = {
	GEA_steal_manpower_from_home = {
		allowed = {
			original_tag = GEA
		}
		available = {
			has_manpower < 10000
			GER = {
				has_manpower > 25000
			}
		}
		visible = {
			original_tag = GEA
		}
		days_re_enable = 730
		cost = 100
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GEA_steal_manpower_from_home"
			add_manpower = 25000
			hidden_effect = {
				GER = {
					country_event = {
						id = Ostasien.200
						days = 1
					}
				}
			}
		}
	}

	GEA_steal_guns_from_home = {
		allowed = {
			original_tag = GEA
		}
		available = {
			stockpile_ratio = {
				archetype = infantry_equipment
				ratio < 0.05
			}
			GER = {
				stockpile_ratio = {
					archetype = infantry_equipment
					ratio > 0.1
				}
			}
		}
		visible = {
			original_tag = GEA
		}
		days_re_enable = 365
		cost = 50
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GEA_steal_guns_from_home"
			custom_effect_tooltip = GEA_receive_guns_from_home
			hidden_effect = {
				GER = {
					country_event = {
						id = Ostasien.201
						days = 1
					}
				}
			}
		}
	}
}

GEA_help_lep_decisions = {

	GEA_give_guns_to_lep = {
		allowed = {
			original_tag = GEA
		}
		available = {
			stockpile_ratio = {
				archetype = infantry_equipment
				ratio > 0.1
			}
		}
		visible = {
			original_tag = GEA
		}
		fire_only_once = yes
		cost = 5
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GEA_give_guns_to_lep"
			custom_effect_tooltip = GEA_try_to_give_guns_to_LEP_tooltip
			hidden_effect = {
				LEP = {
					country_event = {
						id = Ostasien.202
						days = 0
					}
				}
			}
		}
	}

	GEA_give_factories_to_lep = {
		allowed = {
			original_tag = GEA
		}
		available = {
			num_of_available_civilian_factories > 4
			country_exists = LEP
			NOT = {
				has_country_flag = GEA_no_factory_lease
			}
		}
		visible = {
			original_tag = GEA
		}
		fire_only_once = yes
		cost = 5
		days_remove = 120
		modifier = {
			civilian_factory_use = 4
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GEA_give_factories_to_lep"
			custom_effect_tooltip = GEA_try_to_give_factories_to_LEP_tooltip
			hidden_effect = {
				LEP = {
					country_event = {
						id = Ostasien.203
						days = 0
					}
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove GEA_give_factories_to_lep"
			add_war_support = 0.1
			add_political_power = 100
		}
	}
}

prospect_for_resources = {
	GEA_develop_aluminum_deposits_wtt = {

		icon = aluminium

		allowed = {
			has_dlc = "Waking the Tiger"
		}

		highlight_states = {
			state = 846
		}

		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 3
			owns_state = 846
			controls_state = 846
		}

		visible = {
			owns_state = 846
			controls_state = 846
			846 = {
				NOT = {
					has_state_flag = johore_aluminium_developed
				}
			}

		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 1
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove GEA_develop_aluminum_deposits_wtt"
			846 = { set_state_flag = johore_aluminium_developed }
			846 = {
				add_resource = {
					type = aluminium
					amount = 50
				}
			}
		}
	}

	GEA_develop_aluminum_deposits = {

		icon = aluminium

		allowed = {
			NOT = { has_dlc = "Waking the Tiger" }
		}

		highlight_states = {
			state = 846
		}

		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 2
			owns_state = 846
			controls_state = 846
		}

		visible = {
			owns_state = 846
			controls_state = 846
			846 = {
				NOT = {
					has_state_flag = johore_aluminium_developed
				}
			}

		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {

		}

		ai_will_do = {
			factor = 1
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GEA_develop_aluminum_deposits"
			add_timed_idea = {
				idea = GEA_development_idea
				days = 60
			}

		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove GEA_develop_aluminum_deposits"
			846 = { set_state_flag = johore_aluminium_developed }
			846 = {
				add_resource = {
					type = aluminium
					amount = 50
				}
			}
		}
	}

	GEA_develop_sarawak_oil_wtt = {

		icon = oil

		allowed = {
			has_dlc = "Waking the Tiger"
		}

		highlight_states = {
			state = 333
		}

		available = {
			has_tech = excavation3
			num_of_civilian_factories_available_for_projects > 3
			owns_state = 333
			controls_state = 333
		}

		visible = {
			owns_state = 333
			controls_state = 333
			333 = {
				NOT = {
					has_state_flag = sarawak_oil_developed
				}
			}

		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 1
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GEA_develop_sarawak_oil_wtt"

		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove GEA_develop_sarawak_oil_wtt"
			333 = { set_state_flag = sarawak_oil_developed }
			333 = {
				add_resource = {
					type = oil
					amount = 4
				}
			}
		}
	}

	GEA_develop_sarawak_oil = {

		icon = oil

		allowed = {
			NOT = { has_dlc = "Waking the Tiger" }
		}

		highlight_states = {
			state = 33
		}

		available = {
			has_tech = excavation3
			num_of_civilian_factories_available_for_projects > 2
			owns_state = 333
			controls_state = 333
		}

		visible = {
			owns_state = 333
			controls_state = 333
			333 = {
				NOT = {
					has_state_flag = sarawak_oil_developed
				}
			}

		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {

		}

		ai_will_do = {
			factor = 1
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GEA_develop_sarawak_oil"
			add_timed_idea = {
				idea = GEA_development_idea
				days = 60
			}

		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove GEA_develop_sarawak_oil"
			333 = { set_state_flag = sarawak_oil_developed }
			333 = {
				add_resource = {
					type = oil
					amount = 4
				}
			}
		}
	}


}
